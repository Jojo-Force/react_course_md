## ç¬¬ä¸€ç« 

* åœ¨jsxä¸­è¾“å…¥{}è¿›å…¥javascriptæ¨¡å¼



```react
import { useEffect, useState } from "react";
import "./styles.css";

export default function App() {
  const [advice, setAdvice] = useState("");
  const [count, setCount] = useState(0);
  async function getAdvice() {
    const res = await fetch("https://api.adviceslip.com/advice");
    const data = await res.json();
    console.log(data.slip.advice);
    setAdvice(data.slip.advice);
    setCount((c) => c + 1);
  }

  useEffect(function () {
    getAdvice();
  }, []);
  return (
    <div className="App">
      <h1>{advice}</h1>
      <button onClick={getAdvice}>Get advice</button>
      <Message count={count} />
    </div>
  );
}

function Message(props) {
  return (
    <p>
      You have read
      <strong>{props.count}</strong> pieces of advice
    </p>
  );
}

```



* 2010å‰æ˜¯æœåŠ¡ç«¯æ¸²æŸ“ä¸ºä¸»ï¼Œåƒæ˜¯wordpressï¼Œnextï¼Œremixç­‰éƒ½æ˜¯ï¼Œå‰ç«¯æ˜¯jQueryåº“ã€‚
* 2010åæ”¹ä¸ºå®¢æˆ·ç«¯æ¸²æŸ“ï¼Œç½‘é¡µä¹Ÿæ”¹ä¸ºå«å•é¡µåº”ç”¨ã€‚

![image-20251212112918328](1.assets/image-20251212112918328.png)



* å‰ç«¯çš„å·¥ä½œå®¤è·å–æ•°æ®å’Œæ˜¾ç¤ºæ•°æ®ï¼Œ
* å•é¡µåº”ç”¨ä¸­å¦‚ä½•ä¿æŒæ•°æ®å’ŒUIå§‹ç»ˆåŒæ­¥æ˜¯ä¸€ä¸ªéš¾é¢˜

![image-20251212113524673](1.assets/image-20251212113524673.png)



* piece of data=piece of state
* åŸç”Ÿjsä¸­ï¼šåœ¨å¤„ç†å¤æ‚åº”ç”¨æ—¶ï¼Œå¯¹domçš„æ“ä½œä»£ç ä¼šå¾ˆå¤šï¼Œå¯¼è‡´æ„å¤§åˆ©é¢æ¡å¼ï¼ˆå±å±±Spaghettiï¼‰çš„ä»£ç ã€‚
* æ•°æ®ç›´æ¥å­˜å‚¨åœ¨domç»“æ„ä¸­ï¼Œè¢«å…¨å±€å¯è®¿é—®ï¼Œå®¹æ˜“é€ æˆbugã€‚



* å‰ç«¯æ¡†æ¶ä¸ºä»€ä¹ˆå­˜åœ¨

  * ä¿è¯æ•°æ®å’ŒUIåŒæ­¥
  * æ­£ç¡®çš„ä»£ç æ¶æ„ï¼Œè®©å¤§å®¶æ›´å¥½çš„ç¼–ç¨‹ï¼Œé¿å…å±å±±ä»£ç 
  * ç»™äºˆå›¢é˜Ÿç»Ÿä¸€çš„ç¼–ç æ–¹å¼

  

å®‰è£…æ’ä»¶

* ESLint
* prettier
* Material Icon Theme
* Quokka.jsæ˜¯ä¸ºäº†çº¯jsçš„è¿è¡Œ

é…ç½®auto save

![image-20251212133720241](1.assets/image-20251212133720241.png)



é…ç½®default formatter

![image-20251212133810625](1.assets/image-20251212133810625.png)



é…ç½®format on save

![image-20251212133836053](1.assets/image-20251212133836053.png)



é…ç½®eslint

![image-20251212133903930](1.assets/image-20251212133903930.png)



é…ç½®snippet

![image-20251212134354459](1.assets/image-20251212134354459.png)

åˆ›å»ºæ–‡ä»¶

![image-20251212134406132](1.assets/image-20251212134406132.png)

ç²˜è´´ï¼š

```
{
  "Print to console": {
    "prefix": "cl",
    "scope": "javascript,typescript,javascriptreact",
    "body": ["console.log($1)"],
    "description": "console.log"
  },
  "reactComponent": {
    "prefix": "rfc",
    "scope": "javascript,typescript,javascriptreact",
    "body": [
      "function ${1:${TM_FILENAME_BASE}}() {",
      "\treturn (",
      "\t\t<div>",
      "\t\t\t$0",
      "\t\t</div>",
      "\t)",
      "}",
      "",
      "export default ${1:${TM_FILENAME_BASE}}",
      ""
    ],
    "description": "React component"
  },
  "reactStyledComponent": {
    "prefix": "rsc",
    "scope": "javascript,typescript,javascriptreact",
    "body": [
      "import styled from 'styled-components'",
      "",
      "const Styled${TM_FILENAME_BASE} = styled.$0``",
      "",
      "function ${TM_FILENAME_BASE}() {",
      "\treturn (",
      "\t\t<Styled${TM_FILENAME_BASE}>",
      "\t\t\t${TM_FILENAME_BASE}",
      "\t\t</Styled${TM_FILENAME_BASE}>",
      "\t)",
      "}",
      "",
      "export default ${TM_FILENAME_BASE}",
      ""
    ],
    "description": "React styled component"
  }
}
```



* çº¯reactå®ç°:

```js
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Hello React!</title>
  </head>
  <body>
    <div id="root"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script>
      function App() {
        // const time = new Date().toLocaleDateString();
        const [time, setTime] = React.useState(new Date().toLocaleDateString());

        React.useEffect(function () {
          setInterval(function () {
            setTime(new Date().toLocaleDateString());
          }, 1000);
        }, []);

        return React.createElement("header", null, `Hello React! It's ${time}`);
      }

      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(React.createElement(App));
    </script>
  </body>
</html>

```



* Reactå®˜ç½‘ https://react.dev/  ç€é‡å…³æ³¨Learnå’ŒReferenceç« èŠ‚ï¼ŒEscape Hatchesç« èŠ‚



* Create-react-appä½¿ç”¨webpackå·²ç»è¿‡æ—¶ã€‚è‡ªåŠ¨é›†æˆESLintï¼ŒPrettierã€‚é¡µé¢åˆ·æ–°æ…¢ã€‚
* ä½¿ç”¨viteæ„å»ºreactï¼Œéœ€è¦æ‰‹åŠ¨é›†æˆESLintï¼Œé¡µé¢åˆ·æ–°å¿«ã€‚

![image-20251212142334315](1.assets/image-20251212142334315.png)





```
npx create-react-app@5 pizza-menu
```



* jsåŸºç¡€



* å¯¹è±¡è§£æ„

```js
// const title = book.title;
// const author = book.author;
const { title, author } = book;
```



* æ•°ç»„è§£æ„

```js
// const primaryGenre = genres[0];
// const secondaryGenre = genres[1];
//ä¾æ¬¡è·å¾—æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ ï¼Œç¬¬äºŒä¸ªå…ƒç´ ï¼Œç¬¬ä¸‰ä¸ªå…ƒç´ ...
const [primaryGenre, secondaryGenre, aaa, bbb] = genres;
console.log(primaryGenre, secondaryGenre, aaa, bbb);

//ä¾æ¬¡ç¬¬ä¸‰ä¸ªå…ƒç´ å’Œä¹‹åçš„å…ƒç´ æ”¾åˆ°aaaçš„æ•°ç»„é‡Œé¢
const [primaryGenre, secondaryGenre, ...aaa] = genres;
console.log(primaryGenre, secondaryGenre, aaa);

//æ•°ç»„å±•å¼€åˆ°æ–°çš„æ•°ç»„
const newGenres = [...genres, "epic fantasy"];
newGenres;

//å¯¹è±¡å±•å¼€åˆ°æ–°çš„å¯¹è±¡
const updatedBook = { ...book, moviePublicationDate: "2001-12-19" };

//å¯¹è±¡å±•å¼€åˆ°æ–°çš„å¯¹è±¡ï¼Œè¿˜å¯ä»¥è¦†ç›–åŸå¯¹è±¡ä¸­çš„å­é¡¹
const updatedBook = { ...book, moviePublicationDate: "2001-12-19",id:3 };


```



* å­—ç¬¦ä¸²æ¨¡æ¿å­—é¢å€¼:``${}``é‡Œå¯ä»¥æ”¾ä»»ä½•jsè¡¨è¾¾å¼ã€‚

```js
const summary = `${title} a ${pages} book ${2 + 4} ${
  publicationDate.split("-")[0]
}`;
```



* ä¸‰å…ƒè¿ç®—ç¬¦

```js
const pagesRange = pages > 1000 ? "over a thousand" : "less than 1000";
pagesRange;
console.log(`The book has ${pagesRange} pages`);
```



* ç®­å¤´å‡½æ•°

```js
//æ™®é€šå‡½æ•°
function getYear(str) {
  return str.split("-")[0];
}

//ä¸€å¥è¯ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥çœç•¥{}å’Œreturn
const getYear = (str) => str.split("-")[0];

//ä¸€èˆ¬çš„ç®­å¤´å‡½æ•°ï¼Œå¯ä»¥çœç•¥{}å’Œreturn
const getYear = (str) => {
  return str.split("-")[0];
};

console.log(getYear(publicationDate));
```



* çŸ­è·¯è¯­æ³•

```js
//å½“å€¼ä¸º: 0, '', null, undefinedæ—¶ï¼Œä¸ºfalseï¼Œå…¶ä»–å€¼ä¸ºtrue
//&&ï¼Œå½“ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå‡å€¼æ—¶ï¼Œç¬¬äºŒä¸ªå…ƒç´ è¢«çŸ­è·¯
console.log("jojo" && "Some str");
console.log(0 && "Some str1");

//||ï¼Œå½“ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºçœŸå€¼æ—¶ï¼Œç¬¬äºŒä¸ªå…ƒç´ è¢«çŸ­è·¯
//||ï¼Œå½“ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºå‡å€¼æ—¶ï¼Œç¬¬äºŒä¸ªå…ƒç´ æ‰§è¡Œ
console.log(true || "Some string");
console.log(false || "Some string");

console.log(book.translations.spanish);

const spanishTranslation = book.translations.spanish || "NOT TRANSLATED";
spanishTranslation;

console.log(book.reviews.librarything.reviewsCount);
const countWrong = book.reviews.librarything.reviewsCount || "no data";
countWrong;

//??ä»…ç¬¬ä¸€ä¸ªå…ƒç´ ä¸ºnullæˆ–è€…undefinedï¼Œç¬¬äºŒåŸå§‹æ‰§è¡Œ
//falsy: null, undefined
const count = book.reviews.librarything.reviewsCount ?? "no data";
count;
```



* å¯é€‰é“¾æ“ä½œç¬¦
* ?ä»£è¡¨å¦‚æœlibrarythingä¸å­˜åœ¨ï¼Œåˆ™ç«‹å³è¿”å›undefineï¼Œè€Œä¸ä¼šç»§ç»­æ‰¾reviewsCountè€ŒæŠ¥é”™

```js
const count = book.reviews.librarything?.reviewsCount;
```



* mapæ–¹æ³•
* åªèƒ½ç”¨äºæ•°ç»„ï¼Œæ ¹æ®è§„åˆ™ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ•°ç»„

```js
//åˆ›å»ºä¸€ä¸ªä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½æ˜¯book.title
const titles = books.map((book) => book.title);
console.log(titles);

//åˆ›å»ºä¸€ä¸ªä¸€ä¸ªæ–°æ•°ç»„ï¼Œæ•°ç»„çš„æ¯ä¸€é¡¹éƒ½æ˜¯ä¸€ä¸ªå¯¹è±¡
/*
{
  title: book.title,
  author: book.author,
  reviewsCount: getTotalReviewCount(book),
}
*/
//
const essentialData = books.map((book) => ({
  title: book.title,
  author: book.author,
  reviewsCount: getTotalReviewCount(book),
}));
```



* filterè¿‡æ»¤å™¨
* åªèƒ½ç”¨äºæ•°ç»„ï¼Œfilterè¿‡æ»¤å™¨ä»æ•°ç»„ä¸­é€‰å‡ºç¬¦åˆæ¡ä»¶çš„é¡¹ï¼Œæ„é€ æˆæ–°çš„æ•°ç»„ã€‚

```js

const longBooks = books
  .filter((book) => book.pages > 500)
  .filter((book) => book.hasMovieAdaptation);
longBooks;

const adventureBooks = books
  .filter((book) => book.genres.includes("adventure"))
  .map((book) => book.title);
adventureBooks;
```



* reduceæ–¹æ³•
* åªèƒ½ç”¨äºæ•°ç»„ï¼Œreduceæ–¹æ³•å°†æ•°ç»„ä¸­çš„æŸä¸€é¡¹å€¼è¿›è¡Œæ•°å­¦è¿ç®—åˆæˆä¸€ä¸ªå€¼sumç„¶åè¿”å›ç»™pagesAllBooks

```js
const pagesAllBooks = books.reduce((sum, book) => sum + book.pages, 0);
```



* sortæ–¹æ³•
* åªèƒ½ç”¨äºæ•°ç»„ï¼Œsortæ–¹æ³•æŒ‰ç…§è§„åˆ™å¯¹æ•°ç»„è¿›è¡Œæ’åºï¼Œä¼šæ”¹å˜åŸæ¥çš„æ•°ç»„ï¼Œé…åˆ,sliceä½¿ç”¨åˆ™ä¸ä¼šæ›´æ”¹åŸæ¥çš„æ•°ç»„ã€‚

```js
const arr = [3, 7, 1, 9, 6];
//å‡åº
const sorted = arr.slice().sort((a, b) => a - b);
sorted;//[ 1, 3, 6, 7, 9 ]
arr;
//é™åº
const sorted1 = arr.slice().sort((a, b) => b - a);
sorted1;//[ 9, 7, 6, 3, 1 ]
arr;

//æŒ‰ç…§é¡µæ•°é™åºæ’åˆ—
const sortedByPages = books.slice().sort((a, b) => b.pages - a.pages);
sortedByPages;
```



* æ•°ç»„çš„å¢åˆ æ”¹å®ç°

```js
//1 add book
const newBook = {
  id: 6,
  title: "Harry Potter and the Chamber of Secrets",
  author: "J.K. Rowling",
};
const booksAfterAdd = [...books, newBook];
booksAfterAdd;

//2 delete book
const booksAfterDelete = booksAfterAdd.filter((book) => book.id !== 3);
booksAfterDelete;

//3 update book 
//å°†id==1çš„booké‡Œçš„pagesæ”¹ä¸º1211
const booksAfterUpdate = booksAfterDelete.map((book) =>
  book.id === 1 ? { ...book, pages: 1211 } : book
);
booksAfterUpdate;
```



* å¼‚æ­¥javascript
* å¤„ç†promiseï¼Œthenï¼šå½“æ”¶åˆ°æ•°æ®åæ‰§è¡Œthené‡Œé¢çš„å›è°ƒå‡½æ•°ã€‚

```js
fetch("https://jsonplaceholder.typicode.com/todos")
  .then((res) => res.json())//jsonä¹Ÿè¿”å›ä¸€ä¸ªpromise
  .then((data) => console.log(data));//å¤„ç†jsonçš„promise
console.log("jojo");//è¿™å¥è¯ä¼šå…ˆæ‰“å°
```



* JSXï¼šç±»ä¼¼äºhtmlçš„è¯­æ³•ä¼šè¢«ç¿»è¯‘æˆjsï¼ˆBABELå·¥å…·ï¼‰
* çº¯reactä¸­ä¸èƒ½ä½¿ç”¨JSX

![image-20251215104712133](1.assets/image-20251215104712133.png)

* å‘½ä»¤å¼ï¼šæ‰‹åŠ¨æ“ä½œDOMæ¥æ›´æ–°UIã€‚
* å£°æ˜å¼ï¼šuiå’Œæ•°æ®è‡ªåŠ¨æ˜ å°„å’Œæ›´æ–°ã€‚

![image-20251215105426450](1.assets/image-20251215105426450.png)



* åœ¨reactä¸­jså’Œhtmléƒ½æ˜¯å†™åœ¨jsxä¸­çš„ï¼ŒåŸå› æ˜¯jså’Œhtmlé«˜åº¦ååŒå·¥ä½œï¼Œæ²¡å¿…è¦åˆ†å¼€å†™äº†ã€‚
* reactä½¿ç”¨ç»„ä»¶ä¸ºåŸºæœ¬å•ä½
* ä¸€ä¸ªç»„ä»¶é‡ŒåŒ…å«æ•°æ®ï¼ˆjsï¼‰å’Œé€»è¾‘ï¼ˆjsï¼‰å’Œå¤–è§‚ï¼ˆhtmlå’Œcssï¼‰

![image-20251215113559642](1.assets/image-20251215113559642.png)



* ä½¿ç”¨å†…è”css

```js
function Header() {
  const style = { color: "red", fontSize: "48px", textTransform: "uppercase" };
  return <h1 style={style}>Fast React Pizza Co.</h1>;
}
```



* propsä¼ å‚
* propsä¼ å‚æ”¯æŒå•å€¼ï¼Œæ•°ç»„ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ï¼Œè¿˜æœ‰ç”šè‡³æ˜¯å…¶ä»–ç»„ä»¶

```js
<Pizza
    name="Pizza Funghi"
    ingredient="Tomato,mushrooms"
    price={12}
    photoName="pizzas/funghi.jpg"
/>
            
function Pizza(props) {
  console.log(props);
  return (
    <div className="pizza">
      <img src={props.photoName} alt={props.name} />
      <div>
        <h3>{props.name}</h3>
        <p>{props.ingredients}</p>
        <span>{props.price + 3}</span>
      </div>
    </div>
  );
}

//ç›´æ¥è§£æ„
function Pizza({ pizzaObj }) {
  console.log(pizzaObj);

  if (pizzaObj.soldOut) return null;
  return (
    <li className="pizza">
      <img src={pizzaObj.photoName} alt={pizzaObj.name} />
      <div>
        <h3>{pizzaObj.name}</h3>
        <p>{pizzaObj.ingredients}</p>
        <span>{pizzaObj.price + 3}</span>
      </div>
    </li>
  );
}

```



* reactä½¿ç”¨å•å‘æ•°æ®æµï¼šä»çˆ¶åˆ°å­

  * è®©åº”ç”¨æ›´åŠ å¥½é¢„æµ‹
  * è®©åº”ç”¨æ–¹ä¾¿debugï¼Œ
  * æ›´åŠ å¥½çš„æ€§èƒ½

  

* æŒ‘æˆ˜1

```js
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import "./styles.css";

function Avatar() {
  return (
    <div>
      <img src="1.PNG" alt="avatar" className="avatar" />
    </div>
  );
}
function Intro(params) {
  return (
    <div>
      <h1>Jonas </h1>
      <p>
        Full-stack web developer and teacher at Udemy. When not coding or
        preparing a course, I like to play board games, to cook (and eat), or to
        just enjoy the Portuguese sun at the beach.
      </p>
    </div>
  );
}

function Skill(props) {
  return (
    <div className="skill" style={{ backgroundColor: props.backgroundColor }}>
      {props.name}
    </div>
  );
}

function SkillList() {
  return (
    <div className="skill-list">
      <Skill name="HTML+CSS" backgroundColor="blue" />
      <Skill name="JavaScript" backgroundColor="yellow" />
    </div>
  );
}

function App() {
  return (
    <div className="card">
      <Avatar />
      <div className="data">
        <Intro />
        {/* Should contain one Skill component
        for each web dev skill that you have,
        customized with props */}
        <SkillList />
      </div>
    </div>
  );
}

const rootElement = document.getElementById("root");
const root = createRoot(rootElement);

root.render(
  <StrictMode>
    <App />
  </StrictMode>
);

```



* JSXä¸­ä¸å…è®¸ä½¿ç”¨ifå’Œelseï¼Œä½†{}ä¸­å¯ä»¥ä½¿ç”¨å˜é‡ï¼Œæ•°ç»„ï¼Œå¯¹è±¡ï¼Œmapï¼Œä¸‰å…ƒè¿ç®—ç¬¦ã€‚



* åœ¨ä½¿ç”¨mapæ–¹æ³•æ—¶ï¼Œå¿…é¡»ä¼ å…¥å”¯ä¸€çš„keyï¼Œä¸ç„¶ä¼šå‘Šè­¦

```jsx
<div>
    {pizzaData.map((pizza) => (
      <Pizza pizzaObj={pizza} key={pizza.name} />
    ))}
</div>
```



* trueå’Œfalseä¸ä¼šè¢«æ¸²æŸ“ï¼Œä½†æ˜¯0ä¼šè¢«æ¸²æŸ“

```jsx
  {isOpen && (
    <div className="order">
      <p>
        We're open until until {closeHour}:00. Come vist us or order online.
      </p>
      <button className="btn">Order</button>
    </div>
  )}

  const pizzas = [];
  const numPizzas = pizzas.length;
  return (
    <div className="menu">
      <h2>Out menu</h2>
      {numPizzas && (
        <ul className="pizzas">
          {pizzas.map((pizza) => (
            <Pizza pizzaObj={pizza} key={pizza.name} />
          ))}
        </ul>
      )
```



* ä½¿ç”¨&&æ¡ä»¶æ¸²æŸ“,numPizzaså¯ä»¥æ˜¯javascriptå˜é‡ï¼Œä¸ä¸€å®šè¦æ˜¯useStateå˜é‡

```jsx
  {numPizzas && (
    <ul className="pizzas">
      {pizzas.map((pizza) => (
        <Pizza pizzaObj={pizza} key={pizza.name} />
      ))}
    </ul>
  )
```

* ä½¿ç”¨ä¸‰å…ƒè¿ç®—ç¬¦æ¡ä»¶æ¸²æŸ“

```jsx
  {numPizzas > 0 ? (
    <ul className="pizzas">
      {pizzas.map((pizza) => (
        <Pizza pizzaObj={pizza} key={pizza.name} />
      ))}
    </ul>
  ) : (
    <p>We're still working on our menu</p>
  )}
```

* ä½¿ç”¨å¤šæ¬¡returnè¿›è¡Œæ¡ä»¶æ¸²æŸ“

```jsx
if (!isOpen)
    return (
      <p>
        !We're happy to welcome you between {openHour}:00 - {closeHour}:00
      </p>
);

return (
    <footer className="footer"></footer>
)
```

```jsx
function Pizza(props) {
  console.log(props);

  if (props.pizzaObj.soldOut) return null;
  return (
    <li className="pizza">
      <img src={props.pizzaObj.photoName} alt={props.pizzaObj.name} />
      <div>
        <h3>{props.pizzaObj.name}</h3>
        <p>{props.pizzaObj.ingredients}</p>
        <span>{props.pizzaObj.price + 3}</span>
      </div>
    </li>
  );
}
```



* React Fragments

  æ­£å¸¸å°±ä½¿ç”¨<>å’Œ</>

```jsx
    <>
      <Header />
      <Menu />
      <Footer />
    </>
```

â€‹	å½“ä½ éœ€è¦åœ¨mapä¸­ä½¿ç”¨æ—¶ï¼Œè¦åŠ keyï¼Œå¿…é¡»ä½¿ç”¨React.Fragmentå¸¦key

```jsx
<React.Fragment key='123'>
  <p>
    Authenitc Italian cuisine. 6 creative dishes to choose from. All
    from our stone oven, all orginic, all delicious.
  </p>
  <ul className="pizzas">
    {pizzas.map((pizza) => (
      <Pizza pizzaObj={pizza} key={pizza.name} />
    ))}
  </ul>
</React.Fragment>
```



* ``å¥—${},åœ¨å¥—ä¸‰å…ƒè¿ç®—ç¬¦

```jsx
  return (
    <li className={`pizza ${pizzaObj.soldOut ? "sold-out" : ""}`}>
      <img src={pizzaObj.photoName} alt={pizzaObj.name} />
      <div>
        <h3>{pizzaObj.name}</h3>
        <p>{pizzaObj.ingredients}</p>
        <span>{pizzaObj.soldOut ? "SOLD OUT" : pizzaObj.price}</span>
      </div>
    </li>
  );
```



* æŒ‘æˆ˜2ï¼š

```js
import { StrictMode } from "react";
import { createRoot } from "react-dom/client";
import "./styles.css";

function Avatar() {
  return (
    <div>
      <img src="1.PNG" alt="avatar" className="avatar" />
    </div>
  );
}
function Intro(params) {
  return (
    <div>
      <h1>Jonas </h1>
      <p>
        Full-stack web developer and teacher at Udemy. When not coding or
        preparing a course, I like to play board games, to cook (and eat), or to
        just enjoy the Portuguese sun at the beach.
      </p>
    </div>
  );
}

const skillData = [
  {
    skill: "HTML+CSS",
    level: "advanced",
    color: "blue",
  },
  {
    skill: "JavaScript",
    level: "beginner",
    color: "red",
  },
  {
    skill: "React",
    level: "inter",
    color: "yellow",
  },
];

function Skill({ skill, level, color }) {
  return (
    <div className="skill" style={{ backgroundColor: color }}>
      <span>{skill}</span>
      <span>
        {level === "inter" ? "ğŸ‘Œ" : level === "beginner" ? "ğŸ‘" : "âœ”"}
      </span>
    </div>
  );
}

function SkillList() {
  return (
    <div className="skill-list">
      {skillData.map((skill) => (
        <Skill skill={skill.skill} color={skill.color} level={skill.level} />
      ))}
    </div>
  );
}

function App() {
  return (
    <div className="card">
      <Avatar />
      <div className="data">
        <Intro />
        {/* Should contain one Skill component
        for each web dev skill that you have,
        customized with props */}
        <SkillList />
      </div>
    </div>
  );
}

const rootElement = document.getElementById("root");
const root = createRoot(rootElement);

root.render(
  <StrictMode>
    <App />
  </StrictMode>
);
```



* state
  * æ˜¯ç»„ä»¶åœ¨ç”Ÿå‘½å‘¨æœŸä¸­å¯ä»¥ç»´æŒçš„æ•°æ®
  * æ˜¯ç»„ä»¶çš„è®°å¿†
  * å½“stateæ›´æ–°æ—¶ï¼Œä¼šé‡æ–°æ¸²æŸ“UIç•Œé¢



* ä½¿ç”¨useå¼€å¤´çš„å‡½æ•°æ˜¯Hookå‡½æ•°



* useStateä¸èƒ½åœ¨éreactå‡½æ•°ä¸­è°ƒç”¨ï¼Œä¸èƒ½åœ¨ifä¸­è°ƒç”¨ï¼Œä¸è¦åœ¨setå‡½æ•°ä¹‹å¤–å»æ›´æ–°ã€‚



* reactä¼šç›‘è§†useStateçš„å˜é‡ï¼Œå½“å˜é‡æ›´æ–°æ—¶ï¼Œreactä¼šé‡æ–°æ¸²æŸ“è¿™ä¸ªç»„ä»¶ä¸€æ¬¡ã€‚

  

* ä½¿ç”¨React æ’ä»¶æ˜¾ç¤ºuseStateçš„çŠ¶æ€ï¼Œå¹¶ä¸”å¯ä»¥åœ¨çº¿ä¿®æ”¹ï¼š

![image-20251215200126673](1.assets/image-20251215200126673.png)





* æ›´æ–°useStateçš„æœ€ä½³åŠæ³•ï¼š

å°†

```js
setStep(step+1);
```

æ”¹ä¸ºï¼š

```js
setStep((s) => s + 1);
```



* å¦‚æœä¸éœ€è¦ä¿ƒå‘é¡µé¢æ¸²æŸ“çš„å˜é‡ï¼Œä¸è¦ä½¿ç”¨useStateåˆ›å»ºã€‚



* ä½¿ç”¨åŸç”Ÿjså®ç°åŒæ ·çš„åŠŸèƒ½

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="../src/style.css" />
    <title>Vanilla JS steps</title>
  </head>
  <body>
    <div class="steps">
      <div class="numbers">
        <div class="step-1">1</div>
        <div class="step-2">2</div>
        <div class="step-3">3</div>
      </div>

      <p class="message"></p>

      <div class="buttons">
        <button class="previous">Previous</button>
        <button class="next">Next</button>
      </div>
    </div>

    <script>
      const messages = [
        'Learn React âš›ï¸',
        'Apply for jobs ğŸ’¼',
        'Invest your new income ğŸ¤‘',
      ];

      // Selecting DOM elements
      const step1 = document.querySelector('.step-1');
      const step2 = document.querySelector('.step-2');
      const step3 = document.querySelector('.step-3');
      const message = document.querySelector('.message');
      const btnPrevious = document.querySelector('.previous');
      const btnNext = document.querySelector('.next');

      // "State"
      let step = 1;

      // Manually updating the DOM: changing text content and adding/removing classes (imperative approach)
      const updateUIValues = function () {
        message.textContent = `Step ${step}: ${messages[step - 1]}`;

        if (step >= 1) step1.classList.add('active');
        else step1.classList.remove('active');

        if (step >= 2) step2.classList.add('active');
        else step2.classList.remove('active');

        if (step >= 3) step3.classList.add('active');
        else step3.classList.remove('active');
      };

      // Initial setup
      updateUIValues();

      // Manually attaching event listeners
      btnPrevious.addEventListener('click', function () {
        if (step > 1) step -= 1;
        updateUIValues();
      });

      btnNext.addEventListener('click', function () {
        if (step < 3) step += 1;
        updateUIValues();
      });
    </script>
  </body>
</html>

```



* æŒ‘æˆ˜1

```js
function Counter() {
  const [step, setStep] = useState(1);
  const [count, setCount] = useState(0);

  const today = new Date();
  const time = new Date(today);
  time.setDate(today.getDate() + count);
  const isoDate = time.toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "numeric",
  });
  console.log(isoDate);
  function stepSub() {
    setStep((s) => s - 1);
  }

  function stepAdd() {
    setStep((s) => s + 1);
  }

  function countSub() {
    setCount((s) => s - step);
  }

  function countAdd() {
    setCount((s) => s + step);
  }
  return (
    <div>
      <div>
        <button onClick={stepSub}>-</button>
        <span>Step:{step}</span>
        <button onClick={stepAdd}>+</button>
      </div>
      <div>
        <button onClick={countSub}>-</button>
        <span>Count:{count}</span>
        <button onClick={countAdd}>+</button>
      </div>
      {count === 0 && <span>Today </span>}
      {count > 0 && <span>{count} days from today </span>}
      {count < 0 && <span>{-count} days ago was </span>}
      <span>is {isoDate}</span>
    </div>
  );
}
```





* æ ¹æ®æ¡ä»¶é€‰æ‹©style

```js
function Item({ item }) {
  return (
    <li>
      <span style={item.packed ? { textDecoration: "line-through" } : {}}>
        {item.quantity} {item.description}
      </span>
      <button>"âŒ"</button>
    </li>
  );
}
```



* ä½¿ç”¨Array.fromåˆ›å»ºä¸€ä¸ª[1...20]çš„æ•°ç»„ï¼Œç„¶åä½¿ç”¨mapè¿›è¡Œæ˜ å°„

```html
  <select>
    {Array.from({ length: 20 }, (_, i) => i + 1).map((num) => (
      <option value={num} key={num}>
        {num}
      </option>
    ))}
  </select>
```



* è¡¨å•selectå’Œinputæ•°æ®åŒæ­¥çš„å®ç°ï¼š

```js
function Form() {
  const [description, setDescription] = useState("");
  const [select, setSelect] = useState("");
  function handleSubmit(e) {
    e.preventDefault();
    console.log(e);
  }

  return (
    <form className="add-form" onSubmit={handleSubmit}>
      <h3>What do you need for your trip?</h3>
      <select value={select} onChange={(e) => setSelect(e.target.value)}>
        {Array.from({ length: 20 }, (_, i) => i + 1).map((num) => (
          <option value={num} key={num}>
            {num}
          </option>
        ))}
      </select>
      <input
        type="text"
        placeholder="Item..."
        value={description}
        onChange={(e) => setDescription(e.target.value)}
      />
      <button>Add</button>
    </form>
  );
}
```



* å¦‚æœæŠŠstateä½œä¸ºpropså‚æ•°ä¼ å…¥ï¼Œå½“stateæ›´æ–°æ—¶ï¼Œçˆ¶ç»„ä»¶å’Œå­ç»„ä»¶éƒ½ä¼šé‡æ–°åˆ·æ–°é¡µé¢ã€‚



* æŒ‘æˆ˜2
* ä½¿ç”¨æ»‘åŠ¨æ¡

```ts
function Counter() {
  const [step, setStep] = useState(1);
  const [count, setCount] = useState(0);

  const today = new Date();
  const time = new Date(today);
  time.setDate(today.getDate() + count);
  const isoDate = time.toLocaleDateString("en-US", {
    year: "numeric",
    month: "short",
    day: "numeric",
  });
  console.log(isoDate);

  function countSub() {
    setCount((s) => s - step);
  }

  function countAdd() {
    setCount((s) => s + step);
  }
  return (
    <>
      <div>
        <div>
          <input
            value={step}
            type="range"
            min="0"
            max="10"
            onChange={(e) => setStep(Number(e.target.value))}
          />
          {step}
        </div>
        <div>
          <button onClick={countSub}>-</button>
          {/* <span>Count:{count}</span> */}
          <input
            value={count}
            onChange={(e) => setCount(Number(e.target.value))}
          ></input>
          <button onClick={countAdd}>+</button>
        </div>
        {count === 0 && <span>Today </span>}
        {count > 0 && <span>{count} days from today </span>}
        {count < 0 && <span>{-count} days ago was </span>}
        <span>is {isoDate}</span>
      </div>

      {(count !== 0 || step != 1) && (
        <button
          onClick={() => {
            setCount(0);
            setStep(1);
          }}
        >
          Reset
        </button>
      )}
    </>
  );
}
```



* REACTçš„æ€ç»´
  * å°†UIæ‹†åˆ†æˆç»„ä»¶ï¼Œå»ºç«‹ç»„ä»¶æ ‘
  * æ„å»ºé™æ€ç‰ˆæœ¬ï¼Œæ²¡æœ‰state
  * æ€è€ƒstate
    * ä»€ä¹ˆæ—¶å€™ä½¿ç”¨state
    * ä½¿ç”¨æœ¬åœ°è¿˜æ˜¯å…¨å±€
    * stateå˜é‡æ”¾åœ¨å“ªé‡Œ
  * å»ºç«‹æ•°æ®æµ
    * å•å‘æ•°æ®æµ
    * å­ç»„ä»¶å‘çˆ¶ç»„ä»¶é€šä¿¡
    * è®¿é—®å…¨å±€çŠ¶æ€



* å…¨å±€çŠ¶æ€
  * ä½¿ç”¨Context API
  * ä½¿ç”¨Redux
  
  

* ä»€ä¹ˆæ—¶å€™åˆ›å»ºstateï¼Œåˆ›å»ºåæ”¾åœ¨å“ªé‡Œï¼Ÿ

![image-20251216183938231](1.assets/image-20251216183938231.png)



* inputå®ç°checkbox

```jsx
  <input
    type="checkbox"
    value={item.packed}
    onChange={() => onToggleItem(item.id)}
  />
```



* æ´¾ç”ŸçŠ¶æ€ï¼šå¦‚æœä¸€ä¸ªçŠ¶æ€å¯ä»¥ä»å¦ä¸€ä¸ªçŠ¶æ€è®¡ç®—å‡ºæ¥ï¼Œé‚£è¿™ä¸ªçŠ¶æ€å¯ä»¥ç”¨conståˆ›å»ºï¼Œä»è€Œé˜²æ­¢é¡µé¢å¤šæ¬¡æ¸²æŸ“ã€‚

![image-20251218084304584](1.assets/image-20251218084304584.png)



* æå‰é€€å‡ºï¼Œé¿å…å¤šä½™çš„è®¡ç®—

```js

function Stats({ items }) {
  if (!items.length)
    return (
      <footer className="stats">
        <em>Start adding some items to your packing listğŸ˜</em>
      </footer>
    );

  const numItems = items.length;
  const numPacked = items.filter((item) => item.packed).length;
  const percentage = Math.round((numPacked / numItems) * 100);
  return (
    <footer className="stats">
      <em>
        {percentage === 100
          ? "You gor everything! Ready to go !"
          : `ğŸš©You have ${numItems} items on your list, add you already packed
                ${numPacked} (${percentage}%)`}
      </em>
    </footer>
  );
}
```



* ä¸€ä¸ªé€‰æ‹©åˆ—è¡¨çš„å®ç°ï¼Œsliceé‡æ–°åˆ›å»ºæ–°çš„æ•°ç»„ï¼š

```js
function PackingList({ items, onDeleteItem, onToggleItem }) {
  const [sortBy, setSortBy] = useState("input");

  let sortedItems;

  if (sortBy === "input") sortedItems = items;

  if (sortBy === "description")
    sortedItems = items
      .slice()
      .sort((a, b) => a.description.localeCompare(b.description));

  if (sortBy === "packed")
    sortedItems = items
      .slice()
      .sort((a, b) => Number(a.packed) - Number(b.packed));

  return (
    <div className="list">
      <ul>
        {sortedItems.map((item) => (
          <Item
            item={item}
            onDeleteItem={onDeleteItem}
            key={item.id}
            onToggleItem={onToggleItem}
          />
        ))}
      </ul>

      <div className="actions">
        <select value={sortBy} onChange={(e) => setSortBy(e.target.value)}>
          <option value="input">Sort by input order</option>
          <option value="description">Sort by description</option>
          <option value="packed">Sort by packed status</option>
        </select>
      </div>
    </div>
  );
}
```



* æµè§ˆå™¨apiæ”¯æŒå¯¹è¯æ¡†

```js
  function deleteAllItems() {
    const confirmed = window.confirm(
      "Are you sure you want to delete all items?"
    );
    if (confirmed) setItems(() => []);
  }
```



* ç»ƒä¹ å®ç°æ‰‹é£ç´

```jsx
import "./styles.css";
import { useState } from "react";

const faqs = [
  {
    title: "Where are these chairs assembled?",
    text: "Lorem ipsum dolor sit amet consectetur, adipisicing elit. Accusantium, quaerat temporibus quas dolore provident nisi ut aliquid ratione beatae sequi aspernatur veniam repellendus.",
  },
  {
    title: "How long do I have to return my chair?",
    text: "Pariatur recusandae dignissimos fuga voluptas unde optio nesciunt commodi beatae, explicabo natus.",
  },
  {
    title: "Do you ship to countries outside the EU?",
    text: "Excepturi velit laborum, perspiciatis nemo perferendis reiciendis aliquam possimus dolor sed! Dolore laborum ducimus veritatis facere molestias!",
  },
];

export default function App() {
  return (
    <div>
      <Accordion data={faqs} />
    </div>
  );
}

function Accordion({ data }) {
  return (
    <div className="accordion">
      {data.map((faq, index) => (
        <AccordionItem
          num={index}
          title={faq.title}
          text={faq.text}
          key={index}
        />
      ))}
    </div>
  );
}

function AccordionItem({ num, title, text }) {
  const [isOpen, setIsOpen] = useState(false);
  return (
    <div
      className={isOpen ? "item open" : "item"}
      onClick={() => setIsOpen((i) => !i)}
    >
      <p className="number">{num < 9 ? `0${num + 1}` : num + 1}</p>
      <p className="title">{title}</p>
      <p className="icon">{isOpen ? "+" : "-"}</p>
      {isOpen && <div className="content-box">{text}</div>}
    </div>
  );
}
```



* chrldrenå…ƒç´ çš„ä½¿ç”¨,å¯ä»¥å‘å­ç»„ä»¶ç›´æ¥ä¼ é€’JSXã€‚

```jsx
<Button bgColor="#7950f2" textColor="#fff" onClick={handleNext}>
  <span>"ğŸŸ¢"</span>Next
</Button>
            
function Button({ textColor, bgColor, onClick, children }) {
  return (
    <button
      style={{ backgroundColor: bgColor, color: textColor }}
      onClick={onClick}
    >
      {children}
    </button>
  );
}
```



* chrldrenå…ƒç´ ï¼ŒåµŒå¥—

```jsx
  <StepMessage step={step}>
    {messages[step - 1]}
    <Button
      bgColor={"#e7e7e7"}
      textColor={"#333"}
      onClick={() => alert(`Learn how to ${messages[step - 1]}`)}
    >
      Learn how
    </Button>
  </StepMessage>

function StepMessage({ step, children }) {
  return (
    <p className="message">
      <h3>Step {step}</h3>
      {children}
    </p>
  );
}

function Button({ textColor, bgColor, onClick, children }) {
  return (
    <button
      style={{ backgroundColor: bgColor, color: textColor }}
      onClick={onClick}
    >
      {children}
    </button>
  );
}

```



* ç»ƒä¹ ï¼šæ‰‹é£ç´2ï¼Œä½¿ç”¨childrenä¼ å‚

```jsx
import { useState } from "react";
import "./styles.css";

const faqs = [
  {
    title: "Where are these chairs assembled?",
    text: "Lorem ipsum dolor sit amet consectetur, adipisicing elit. Accusantium, quaerat temporibus quas dolore provident nisi ut aliquid ratione beatae sequi aspernatur veniam repellendus.",
  },
  {
    title: "How long do I have to return my chair?",
    text: "Pariatur recusandae dignissimos fuga voluptas unde optio nesciunt commodi beatae, explicabo natus.",
  },
  {
    title: "Do you ship to countries outside the EU?",
    text: "Excepturi velit laborum, perspiciatis nemo perferendis reiciendis aliquam possimus dolor sed! Dolore laborum ducimus veritatis facere molestias!",
  },
];

export default function App() {
  return (
    <div>
      <Accordion data={faqs} />
    </div>
  );
}

function Accordion({ data }) {
  const [curOpen, setCurOpen] = useState(null);

  return (
    <div className="accordion">
      {data.map((el, i) => (
        <AccordionItem
          curOpen={curOpen}
          onOpen={setCurOpen}
          title={el.title}
          num={i}
          key={el.title}
        >
          {el.text}
        </AccordionItem>
      ))}
      <AccordionItem
        curOpen={curOpen}
        onOpen={setCurOpen}
        title={"Test 1"}
        num={22}
        key={"test 1"}
      >
        <p>Allows React developers to:</p>
        <ul>
          <li>Break up UI into components</li>
          <li>Make components resusable</li>
          <li>Place state efficiently</li>
        </ul>
      </AccordionItem>
    </div>
  );
}

function AccordionItem({ num, title, children, curOpen, onOpen }) {
  // const [isOpen, setIsOpen] = useState(false);
  const isOpen = num === curOpen;

  function handleToggle() {
    // setIsOpen((isOpen) => !isOpen);
    onOpen(isOpen ? null : num);
  }

  return (
    <div className={`item ${isOpen ? "open" : ""}`} onClick={handleToggle}>
      <p className="number">{num < 9 ? `0${num + 1}` : num + 1}</p>
      <p className="title">{title}</p>
      <p className="icon">{isOpen ? "-" : "+"}</p>

      {isOpen && <div className="content-box">{children}</div>}
    </div>
  );
}

```



* ç»ƒä¹ ï¼šè®¡ç®—å°è´¹

```jsx
import { use, useState } from "react";

const messages = [
  "Learn React âš›ï¸",
  "Apply for jobs ğŸ’¼",
  "Invest your new income ğŸ¤‘",
];
export default function App() {
  const [yourService, setYourService] = useState(0);
  const [friendService, setFriendService] = useState(0);
  const [bill, setBill] = useState(0);
  return (
    <div>
      <Bill bill={bill} setBill={setBill} />
      <Service service={yourService} setService={setYourService}>
        How did you like the service?
      </Service>
      <Service service={friendService} setService={setFriendService}>
        How did your friend like the service?
      </Service>

      {bill > 0 && (
        <Output
          bill={bill}
          yourService={yourService}
          friendService={friendService}
        />
      )}

      {bill > 0 && (
        <Button
          setBill={setBill}
          setFriendService={setFriendService}
          setYourService={setYourService}
        >
          Reset
        </Button>
      )}
    </div>
  );
}

function Bill({ bill, setBill }) {
  return (
    <div>
      <span>How musch was the bill?</span>
      <input value={bill} onChange={(e) => setBill(e.target.value)}></input>
    </div>
  );
}

function Service({ children, service, setService }) {
  return (
    <div>
      <span>{children}</span>
      <select
        value={service}
        onChange={(e) => {
          setService(e.target.value);
        }}
      >
        <option value={0}>Dissatisfied(0%)</option>
        <option value={5}>It was okay(5%)</option>
        <option value={10}>It was good(10%)</option>
        <option value={20}>Absolutely amazing!(20%)</option>
      </select>
    </div>
  );
}

function Output({ bill, yourService, friendService }) {
  const tips =
    (Number(bill) * ((Number(yourService) + Number(friendService)) / 2)) / 100;
  const all = Number(bill) + Number(tips);
  return (
    <p>
      <strong>
        You pay ${all}(${bill}+ ${tips}tip)
      </strong>
    </p>
  );
}

function Button({ children, setBill, setFriendService, setYourService }) {
  function onClick() {
    setBill(0);
    setFriendService(0);
    setYourService(0);
  }

  return <button onClick={onClick}>{children}</button>;
}

```



***These resources are 100% optional, but might give you additional insights or provide ever deeper dives into some topics.\***

ğŸ‘‰ [Writing Resilient Components](https://overreacted.io/writing-resilient-components/?ref=jonas.io) (By Dan Abramov from the React team)

ğŸ‘‰ [Things I think about when I write React code](https://github.com/mithi/react-philosophies?ref=jonas.io) (GitHub repository)

ğŸ‘‰ [A (Mostly) Complete Guide to React Rendering Behavior](https://blog.isquaredsoftware.com/2020/05/blogged-answers-a-mostly-complete-guide-to-react-rendering-behavior/?ref=jonas.io) (By Mark Erikson from the redux team)

ğŸ‘‰ [A Visual Guide to React Rendering](https://alexsidorenko.com/blog/react-render-always-rerenders/?ref=jonas.io) (A multi-part series, check out the other ones)

ğŸ‘‰ [Inside Fiber: in-depth overview of the new reconciliation algorithm in React](https://medium.com/react-in-depth/inside-fiber-in-depth-overview-of-the-new-reconciliation-algorithm-in-react-e1c04700ef6e?ref=jonas.io)

ğŸ‘‰ [A Cartoon Intro to Fiber](https://www.youtube.com/watch?v=ZCuYPiUIONs?ref=jonas.io) (YouTube video)

ğŸ‘‰ [What Is React Fiber? React.js Deep Dive](https://www.youtube.com/watch?v=0ympFIwQFJw?ref=jonas.io) (YouTube video)

ğŸ‘‰ [The React and React Native Event System Explained](https://levelup.gitconnected.com/how-exactly-does-react-handles-events-71e8b5e359f2?ref=jonas.io)

ğŸ‘‰ [Under the hood of event listeners in React](https://gist.github.com/romain-trotard/76313af8170809970daa7ff9d87b0dd5?ref=jonas.io)

ğŸ‘‰ [A DIY guide to build your own React](https://github.com/pomber/didact?ref=jonas.io)

ğŸ‘‰ [useSyncExternalStore First Look](https://julesblom.com/writing/usesyncexternalstore?ref=jonas.io)

ğŸ‘‰ [Under the hood of React's hooks system](https://the-guild.dev/blog/react-hooks-system?ref=jonas.io)

ğŸ‘‰ [Why Do React Hooks Rely on Call Order?](https://overreacted.io/why-do-hooks-rely-on-call-order/?ref=jonas.io) (By Dan Abramov

ğŸ‘‰ [So you think you know everything about React refs](https://blog.thoughtspile.tech/2021/05/17/everything-about-react-refs/?ref=jonas.io)

ğŸ‘‰ [react-use: Reusable React Hook Library](https://github.com/streamich/react-use?ref=jonas.io) (GitHub repository)

ğŸ‘‰ [react-hookz: React hooks done right](https://github.com/react-hookz/web?ref=jonas.io) (GitHub repository)



* å¦‚ä½•åˆ’åˆ†ç»„ä»¶

  * å®‰è£…åŠŸèƒ½é€»è¾‘åˆ’åˆ†

  * å¯å¤ç”¨æ€§

  * è¯¥ç»„ä»¶çš„èŒè´£å’Œå¤æ‚åº¦

  * ä¸ªäººç¼–ç é£æ ¼

    

* å…ˆä»ä¸€ä¸ªä¸€ä¸ªè¾ƒå¤§çš„ç»„ä»¶å¼€å§‹ç¼–ç ï¼Œå¦‚æœä½ éœ€è¦å¯ä»¥æ‹†åˆ†æˆä¸¤ä¸ªæ–°çš„ç»„ä»¶ã€‚



* åˆ›å»ºæ–°çš„ç»„ä»¶ï¼Œå°±æ˜¯åˆ›å»ºæ–°çš„æŠ½è±¡ï¼Œè¿‡å¤šçš„æŠ½è±¡ä¼šå¢åŠ ç»´æŠ¤æˆæœ¬ï¼Œä¸è¦è¿‡æ—©çš„åˆ›å»ºæ–°çš„æŠ½è±¡
* æ ¹æ®ç»„ä»¶çš„åŠŸèƒ½å’Œæ˜¾ç¤ºå»å‘½åç»„ä»¶ï¼Œå¯ä»¥ä½¿ç”¨é•¿åã€‚
* ä¸è¦å£°æ˜æ–°çš„ç»„ä»¶åœ¨å¦ä¸€ä¸ªç»„ä»¶å†…éƒ¨
* å…ˆå°†ç»„ä»¶æ”¾åœ¨ç”¨ä¸€ä¸ªæ–‡ä»¶ä¸­ï¼Œä¸è¦è¿‡æ—©çš„å°†ç»„ä»¶æ‹†åˆ†æˆä¸åŒçš„æ–‡ä»¶ã€‚
* å½“ç»„ä»¶è¶Šå°ï¼Œå¯å¤ç”¨æ€§å°±è¶Šå¼º
* åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­ï¼Œæ—¢æœ‰å°çš„ç»„ä»¶ï¼Œåˆæœ‰å¤§çš„ç»„ä»¶ï¼Œè¿™æ˜¯å¾ˆæ­£å¸¸çš„ã€‚



* ç»„ä»¶çš„åˆ†ç±»
  * æ²¡æœ‰stateï¼Œæœ‰propsçš„ç»„ä»¶ï¼Œåªæ˜¯æ˜¾ç¤ºã€‚å¯å¤ç”¨ã€‚
  * æœ‰stateçš„ç»„ä»¶ï¼Œå¯å¤ç”¨ã€‚
  * ç»“æ„æ€§çš„ç»„ä»¶ï¼Œé›†åˆåˆ«çš„ç»„ä»¶ã€‚ä¸ä¸€å®šå¯å¤ç”¨ã€‚



* props drillingï¼špropsä¼ å‚ä¼ çš„å¾ˆæ·±



* component compositionï¼šä½¿ç”¨children propsæ¥æ„é€ ç»„ä»¶
  * è®©ç»„ä»¶æ›´åŠ çµæ´»ã€‚
  * è§£å†³props drillingé—®é¢˜ã€‚
* moviesè¢«å¤šå±‚ä¼ é€’ï¼Œé€šè¿‡children propsé¿å…props drillingé—®é¢˜

```jsx
export default function App() {
  const [movies, setMovies] = useState(tempMovieData);

  return (
    <>
      <NavaBar>
        <Search />
        <NumResults movies={movies} />
      </NavaBar>

      <Main>
        <ListBox>
          <MovieList movies={movies} />
        </ListBox>
        <WatchedBox />
      </Main>
    </>
  );
}
```



* ä½¿ç”¨children propsæ„å»ºè¿™ç§æ›´åŠ ç›´è§‚çš„æ ‘çŠ¶ç»“æ„ï¼š

```jsx
export default function App() {
  const [movies, setMovies] = useState(tempMovieData);
  const [watched, setWatched] = useState(tempWatchedData);

  return (
    <>
      <NavaBar>
        <Search />
        <NumResults movies={movies} />
      </NavaBar>

      <Main>
        <Box>
          <MovieList movies={movies} />
        </Box>
        <Box>
          <WatchedSummary watched={watched} />
          <WatchedMoviesList watched={watched} />
        </Box>
      </Main>
    </>
  );
}
```



* å…ƒç´ propsï¼Œä½¿ç”¨propsä¼ é€’jsxä¹Ÿæ˜¯å¯ä»¥çš„

```jsx
  <Main>
    <Box aaa={<MovieList movies={movies} />} />
    {/* <Box>
      <MovieList movies={movies} />
    </Box>
    <Box>
      <WatchedSummary watched={watched} />
      <WatchedMoviesList watched={watched} />
    </Box> */}
  </Main>
```

```jsx
export default function App() {
  const [movies, setMovies] = useState(tempMovieData);
  const [watched, setWatched] = useState(tempWatchedData);

  return (
    <>
      <NavaBar>
        <Search />
        <NumResults movies={movies} />
      </NavaBar>

      <Main>
        <Box
          aaa={
            <>
              <WatchedSummary watched={watched} />
              <WatchedMoviesList watched={watched} />
            </>
          }
        />
        {/* <Box>
          <MovieList movies={movies} />
        </Box>
        <Box>
          <WatchedSummary watched={watched} />
          <WatchedMoviesList watched={watched} />
        </Box> */}
      </Main>
    </>
  );
}
```



* propsè®¾ç½®é»˜è®¤å€¼,å¦‚æœæ²¡æœ‰ä¼ å‚ï¼Œåˆ™ä½¿ç”¨é»˜è®¤å€¼

```jsx
export default function StarRating({ maxRating = 5 }) {
  return (
    <div style={containerStyle}>
      <div style={starContainerStyle}>
        {Array.from({ length: maxRating }, (_, i) => (
          <span>S{i + 1}</span>
        ))}
      </div>
      <p style={textStyle}>10</p>
    </div>
  );
}
```



* è‡ªå®šä¹‰é€šç”¨ç»„ä»¶

```jsx
import { useState } from "react";
import PropTypes from "prop-types";

const containerStyle = {
  display: "flex",
  alignItems: "center",
  gap: "16px",
};

const starContainerStyle = {
  display: "flex",
};

StarRating.propTypes = {
  maxRating: PropTypes.number,
  defualtRaing: PropTypes.number,
  color: PropTypes.string,
  size: PropTypes.number,
  messages: PropTypes.array,
  className: PropTypes.string,
  onSetRating: PropTypes.func,
};

export default function StarRating({
  maxRating = 5,
  color = "#fcc419",
  size = 48,
  className = "",
  messages = [],
  defualtRaing = 0,
  onSetRating,
}) {
  const [rating, setRating] = useState(defualtRaing);
  const [tempRating, setTempRating] = useState(0);

  function handleRating(rating) {
    setRating(rating);
    onSetRating(rating);
  }
  const textStyle = {
    lineHeight: "0",
    margin: "0",
    color: color,
    fontSize: `${size / 1.5}px`,
  };
  return (
    <div style={containerStyle} className={className}>
      <div style={starContainerStyle}>
        {Array.from({ length: maxRating }, (_, i) => (
          <Star
            key={i}
            full={tempRating > 0 ? tempRating >= i + 1 : rating >= i + 1}
            onRate={() => handleRating(i + 1)}
            onHoverIn={() => setTempRating(i + 1)}
            onHoverOut={() => setTempRating(0)}
            color={color}
            size={size}
          />
        ))}
      </div>
      <p style={textStyle}>
        {messages.length === maxRating
          ? messages[tempRating > 0 ? tempRating : rating - 1]
          : tempRating > 0
          ? tempRating
          : rating || ""}
      </p>
    </div>
  );
}

function Star({ onRate, full, onHoverIn, onHoverOut, color, size }) {
  const starStyle = {
    width: `${size}px`,
    height: `${size}px`,
    display: "block",
    cursor: "pointer",
  };
  return (
    <span
      role="button"
      style={starStyle}
      onClick={onRate}
      onMouseEnter={onHoverIn}
      onMouseLeave={onHoverOut}
    >
      {full ? (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill={color}
          viewBox="0 0 24 24"
          stroke={color}
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeWidth="{2}"
            d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"
          />
        </svg>
      ) : (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke={color}
        >
          <path
            strokeLinecap="round"
            strokeLinejoin="round"
            strokeWidth="{2}"
            d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"
          />
        </svg>
      )}
    </span>
  );
}

```



* æŒ‘æˆ˜ï¼šåšä¸€ä¸ªè‡ªåˆ¶ç»„ä»¶

```jsx
import { useState } from "react";
import PropTypes from "prop-types";
import "./styles.css";

export default function App() {
  return (
    <div>
      <TextExpander>
        Space travel is the ultimate adventure! Imagine soaring past the stars
        and exploring new worlds. It's the stuff of dreams and science fiction,
        but believe it or not, space travel is a real thing. Humans and robots
        are constantly venturing out into the cosmos to uncover its secrets and
        push the boundaries of what's possible.
      </TextExpander>

      <TextExpander
        collapsedNumWords={20}
        expandButtonText="Show text"
        collapseButtonText="Collapse text"
        buttonColor="#ff6622"
      >
        Space travel requires some seriously amazing technology and
        collaboration between countries, private companies, and international
        space organizations. And while it's not always easy (or cheap), the
        results are out of this world. Think about the first time humans stepped
        foot on the moon or when rovers were sent to roam around on Mars.
      </TextExpander>

      <TextExpander expanded={true} className="box">
        Space missions have given us incredible insights into our universe and
        have inspired future generations to keep reaching for the stars. Space
        travel is a pretty cool thing to think about. Who knows what we'll
        discover next!
      </TextExpander>
    </div>
  );
}

TextExpander.propTypes = {
  collapsedNumWords: PropTypes.number,
  expandButtonText: PropTypes.string,
  collapseButtonText: PropTypes.string,
  buttonColor: PropTypes.string,
  expanded: PropTypes.bool,
  className: PropTypes.string,
  children: PropTypes.string,
};
function TextExpander({
  collapsedNumWords = 40,
  expandButtonText = "Show more",
  collapseButtonText = "Show less",
  buttonColor = "blue",
  expanded = false,
  className = "",
  children,
}) {
  const [isExpanded, setIsExpanded] = useState(expanded);
  function onClick() {
    setIsExpanded((s) => !s);
  }

  const innerText = isExpanded
    ? children
    : children.length > 20
    ? children.substring(0, collapsedNumWords) + "..."
    : children;

  const buttonStyle = {
    background: "none",
    border: "none",
    font: "inherit",
    cursor: "pointer",
    marginLeft: "6px",
    color: buttonColor,
  };
  return (
    <div>
      <p className={className}>{innerText}</p>
      <button style={buttonStyle} onClick={onClick}>
        {isExpanded ? collapseButtonText : expandButtonText}
      </button>
    </div>
  );
}

```



* Component
  * æ˜¯UIçš„æè¿°
  * æ˜¯ä¸€ä¸ªjså‡½æ•°ï¼Œè¿”å›Reactå…ƒç´ ï¼Œä¸€èˆ¬æ˜¯jsx
  * æ˜¯ä¸€ä»½è“å›¾æˆ–è€…æ¨¡æ¿



* Component Instance
  * æ ¹æ®Componentåˆ›å»º
  * è°ƒç”¨Componentå‡½æ•°
  * æ˜¯å®é™…å­˜åœ¨çš„å…ƒç´ 
  * æ¯ä¸€ä¸ªéƒ½æœ‰è‡ªå·±ç‹¬è‡ªçš„çŠ¶æ€å’Œprops
  * æœ‰ç”Ÿå‘½å‘¨æœŸ



* React Element
  * JSXä¼šè¢«è½¬æ¢æˆReact.createElement()å‡½æ•°
  * React Elementæ˜¯è¿™äº›å‡½æ•°è°ƒç”¨çš„ç»“æœ
  * ä¼šè¢«è½¬åŒ–æˆDOMå…ƒç´ ï¼ˆHTMLä¸­ï¼‰



* ç»„ä»¶è°ƒç”¨çš„åŒºåˆ«

```jsx
//è§†ä¸ºReactç»„ä»¶
console.log(<DifferentContent />);
//è§†ä¸ºä¸€ä¸ª<div>
console.log(DifferentContent());
```



* è§¦å‘æ¸²æŸ“çš„æ¡ä»¶

  * åˆå§‹æ¸²æŸ“
  * å½“stateæ›´æ–°æ—¶ï¼Œè¿›è¡Œé‡æ–°æ¸²æŸ“

  * é‡æ–°æ¸²æŸ“æ˜¯å¯¹ç»„ä»¶ä»¥åŠå®ƒçš„æ‰€æœ‰å­ç»„ä»¶è¿›è¡Œé‡æ–°æ¸²æŸ“çš„ï¼Œä¸æ˜¯åªæœ‰stateæ›´æ–°çš„å½“å‰ç»„ä»¶ã€‚
  * å½“stateæ›´æ–°æ—¶ï¼Œæ¸²æŸ“ä¸æ˜¯ç«‹å³å‘ç”Ÿçš„ï¼ŒJSå¼•æ“ä¸­é—´ä¼šæœ‰å‡ ä¸ªmsï¼Œå½“å¤šä¸ªstateåŒæ—¶æ›´æ–°æ—¶ï¼Œæ›´æ–°ä¼šè¢«æ‰¹é‡å¤„ç†ã€‚



* 1.è§¦å‘ï¼šè§¦å‘é‡æ–°æ¸²æŸ“
* 2.æ¸²æŸ“é˜¶æ®µï¼ˆå¼‚æ­¥ï¼Œreactå®ç°ï¼‰ï¼šæ›´æ–°Vitual Domæ ‘
* 2.æ¸²æŸ“é˜¶æ®µï¼ˆå¼‚æ­¥ï¼Œreactå®ç°ï¼‰ï¼šå°†VirtualDomæ ‘å’Œå½“å‰çš„Fiberæ ‘æ¯”è¾ƒï¼Œè·å¾—diffçš„éƒ¨åˆ†ä½œä¸ºéœ€è¦updateçš„domåˆ—è¡¨ï¼Œæ›´æ–°Fiberæ ‘
* 3.Commité˜¶æ®µï¼ˆåŒæ­¥ï¼Œreact-domå®ç°ï¼‰ï¼šå°†éœ€è¦updateçš„domåˆ—è¡¨ä¸€æ¬¡æ€§æ›´æ–°åˆ°DOMä¸­ã€‚
* 4.æµè§ˆå™¨æ¸²æŸ“ï¼šæ›´æ–°UI

![image-20251219193842870](1.assets/image-20251219193842870.png)



* æ›´æ–°ï¼šåŒä¸€ä¸ªä½ç½®ï¼Œè¢«æ¢æˆäº†ä¸åŒçš„å…ƒç´ ï¼Œè¿™æ—¶å€™å…ƒç´ çš„æ‰€æœ‰å­ç»„ä»¶çš„çŠ¶æ€ä¼šå…¨éƒ¨ä¸¢å¤±ã€‚

![image-20251219195739848](1.assets/image-20251219195739848.png)

* æ›´æ–°ï¼šåŒä¸€ä¸ªä½ç½®ï¼ŒåŒä¸€ä¸ªå…ƒç´ ï¼Œåªæ˜¯classNameæˆ–è€…å‚æ•°å‘ç”Ÿäº†å˜åŒ–ï¼Œè¿™æ—¶å€™å­å…ƒç´ çš„çš„çŠ¶æ€ä¸ä¼šä¸¢å¤±ã€‚

![image-20251219195929771](1.assets/image-20251219195929771.png)



Keyå‚æ•°çš„ä½œç”¨

* å½“å…ƒç´ æ‹¥æœ‰keyæ—¶ï¼Œå³ä½¿å®ƒåœ¨æ ‘ç»“æ„ä¸­çš„ä½ç½®å‘ç”Ÿå˜åŒ–ï¼Œä¹Ÿä¸ä¼šé”€æ¯å†é‡æ–°åˆ›å»ºï¼Œè¿™æ ·èŠ‚çœäº†æ€§èƒ½ã€‚
  * ç»“è®ºï¼šåœ¨å¤šä¸ªç›¸åŒå­å…ƒç´ çš„åœ°æ–¹éœ€è¦ä½¿ç”¨keyï¼Œå¦‚mapåˆ—è¡¨åˆ›å»ºçš„ç»„ä»¶ï¼Œä¸ç„¶æ€§èƒ½ä¸å¥½ã€‚
* å½“å…ƒç´ æ‹¥æœ‰keyæ—¶ï¼Œå³ä½¿å®ƒåœ¨æ ‘ç»“æ„ä¸­ä½ç½®æ²¡æœ‰å˜åŒ–ï¼Œåªè¦keyå‘ç”Ÿäº†å˜åŒ–ï¼Œå®ƒå°±ä¼šé”€æ¯+é‡æ–°åˆ›å»ºã€‚
  * ç»“è®ºï¼šä½¿ç”¨keyå»é”€æ¯çŠ¶æ€ï¼Œå³ä½¿æ˜¯åŒä¸€ä¸ªå…ƒç´ çš„åªæ˜¯classNameæˆ–è€…å‚æ•°å‘ç”Ÿäº†å˜åŒ–ã€‚

![image-20251219201015149](1.assets/image-20251219201015149.png)

![image-20251219201459614](1.assets/image-20251219201459614.png)

![image-20251219201524715](1.assets/image-20251219201524715.png)

![image-20251219201547625](1.assets/image-20251219201547625.png)



* ä¸¤ç§é€»è¾‘åœ¨Reactç»„ä»¶ä¸­
  * æ¸²æŸ“é€»è¾‘
  * äº‹ä»¶å¤„ç†å‡½æ•°

![image-20251220163342641](1.assets/image-20251220163342641.png)

* å‡½æ•°å¼ç¼–ç¨‹åŸåˆ™
  * å‰¯ä½œç”¨ï¼šå‡½æ•°ä¿®æ”¹äº†å¤–éƒ¨æ•°æ®ï¼Œä¸å¤–éƒ¨äº‹ä»¶äº§ç”Ÿäº†äº¤äº’ï¼Œåƒæ˜¯ï¼šå¤–éƒ¨å˜é‡ï¼ŒHTTPè¯·æ±‚ï¼Œå†™DOM
  * çº¯å‡½æ•°ï¼šä¸ä¼šä¿®æ”¹å¤–éƒ¨å˜é‡ï¼Œç›¸åŒinputä¸€å®šè·å¾—ç›¸åŒçš„outputã€‚

![image-20251220163444731](1.assets/image-20251220163444731.png)



* åœ¨ç»„ä»¶çš„æ¸²æŸ“é€»è¾‘ä¸­ï¼Œå®ƒä¸€å®šè¦æ˜¯çº¯å‡½æ•°ã€‚
* åœ¨æ¸²æŸ“é€»è¾‘ä¸­ï¼š
  * ä¸èƒ½åšç½‘ç»œè¯·æ±‚ã€‚
  * ä¸èƒ½å¼€å¯å®šæ—¶å™¨
  * ä¸èƒ½æ“ä½œDOM
  * ä¸èƒ½ä¿®æ”¹å¤–éƒ¨å˜é‡
  * ä¸èƒ½æ›´æ–°state

![image-20251220163721761](1.assets/image-20251220163721761.png)



* æ‰€æœ‰çš„æ›´æ–°stateåœ¨ä¸€ä¸ªå‡½æ•°ä¸­ï¼Œä¼šè¢«æ‰“åŒ…æˆä¸€æ¬¡æ›´æ–°ï¼Œç»Ÿä¸€æ‰§è¡Œã€‚å¹¶ä¸”è¿™ç§æ‰§è¡Œæ˜¯å¼‚æ­¥çš„ã€‚

![image-20251220172013402](1.assets/image-20251220172013402.png)

![image-20251220172124918](1.assets/image-20251220172124918.png)



* è¿™æ‰“åŒ…ç»Ÿä¸€æ‰§è¡Œçš„è¡Œä¸ºåœ¨React17ä¸­ä»…éƒ¨åˆ†æ”¯æŒï¼ŒReact18ä¸­å®Œå…¨æ”¯æŒ

![image-20251220172141024](1.assets/image-20251220172141024.png)



* å½“æ›´æ–°stateæ—¶æ˜¯åŸºäºå½“å‰çš„çŠ¶æ€ï¼Œä¸€å®šè¦ç”¨å›è°ƒå‡½æ•°çš„å½¢å¼ï¼š

```js
function handleTripleInc() {
  setLikes(likes + 1);
  setLikes(likes + 1);
  setLikes(likes + 1);//ç»“æœæ˜¯1
}

function handleTripleInc() {
  setLikes((likes) => likes + 1);
  setLikes((likes) => likes + 1);
  setLikes((likes) => likes + 1);//ç»“æœæ˜¯3
}
```



* æµè§ˆå™¨çš„äº‹ä»¶å¤„ç†æœºåˆ¶
  * æ•è·é˜¶æ®µï¼Œä»ä¸Šåˆ°ä¸‹
  * å†’æ³¡é˜¶æ®µï¼Œä»ä¸‹åˆ°ä¸Šï¼Œ
  * æˆ‘ä»¬å¯ä»¥é¢„é˜²å†’æ³¡é€šè¿‡e.stopPropagation()å‡½æ•°
  * äº‹ä»¶å§”æ‰˜ï¼šæˆ‘ä»¬å¯ä»¥æŠŠå­å…ƒç´ çš„äº‹ä»¶ç»‘å®šåœ¨çˆ¶å…ƒç´ çš„äº‹ä»¶ä¸­å¤„ç†ã€‚

![image-20251220174952432](1.assets/image-20251220174952432.png)



* Reactäº‹ä»¶å¤„ç†
  * åŒæ ·ä½¿ç”¨äº‹ä»¶å§”æ‰˜æœºåˆ¶ï¼šç»‘å®šæ‰€æœ‰äº‹ä»¶åœ¨rootèŠ‚ç‚¹ä¸Šï¼Œè¿›è¡Œç»Ÿä¸€å¤„ç†ã€‚

![image-20251220175153103](1.assets/image-20251220175153103.png)



* Reactçš„äº‹ä»¶å’ŒåŸç”Ÿjsçš„äº‹ä»¶çš„åŒºåˆ«
  * åŒ…è£¹åŸç”Ÿäº‹ä»¶
  * æœ‰ç›¸åŒçš„æ¥å£
  * ä¿®å¤äº†ä¸€äº›æµè§ˆå™¨å…¼å®¹é—®é¢˜
  * focusï¼Œblurï¼Œchangeéƒ½ä¼šå†’æ³¡å¤„ç†ï¼Œå¤„ç†scroll
* ä¸åŸç”Ÿjsçš„åŒºåˆ«
  * Reactç”¨é©¼å³°å‘½åæ³•
  * Reactä½¿ç”¨preventDefaultå‡½æ•°é¢„é˜²é»˜è®¤è¡¨ç°
  * Reactå¯ä»¥æ·»åŠ æ•æ‰äº‹ä»¶é˜¶æ®µå¤„ç†å‡½æ•°ï¼šonClickCapture

![image-20251220175311574](1.assets/image-20251220175311574.png)



* Reactæ˜¯ä¸€ä¸ªåº“åªæä¾›é¡µé¢æ¸²æŸ“çš„åŠŸèƒ½ï¼ŒVueæ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œæä¾›æ•´å¥—æ–¹æ¡ˆ

![image-20251220175653023](1.assets/image-20251220175653023.png)



* Reactéœ€è¦ç¬¬ä¸‰æ–¹åº“å®ç°åˆ«çš„åŠŸèƒ½

![image-20251220175738588](1.assets/image-20251220175738588.png)



* Reactä¹Ÿæœ‰æ¡†æ¶ï¼ŒNextjsï¼ŒRemixï¼ŒGtsbyï¼Œç”šè‡³æœ‰å¤šçš„åŠŸèƒ½ï¼šSSGï¼ŒSSRï¼Œå…¨æ ˆã€‚

![image-20251220175814142](1.assets/image-20251220175814142.png)



* ä¸è¦åœ¨ç»„ä»¶å†…éƒ¨å®šä¹‰æ–°çš„ç»„ä»¶ï¼Œæ¯æ¬¡çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œéƒ½ä¼šå¯¼è‡´å­ç»„ä»¶é‡æ–°åˆ›å»ºï¼Œå­ç»„ä»¶çš„çŠ¶æ€ä¼šä¸¢å¤±ã€‚

```jsx
function Parent() {
  const [count, setCount] = useState(0);

  // âš ï¸ å±é™©ï¼æ¯æ¬¡ Parent æ¸²æŸ“éƒ½ä¼šé‡æ–°åˆ›å»º MyButton
  function MyButton() {
    const [innerCount, setInnerCount] = useState(0); // è¿™ä¸ªçŠ¶æ€ä¼šä¸¢å¤±ï¼
    return <button onClick={() => setInnerCount(c => c + 1)}>Clicked {innerCount} times</button>;
  }

  return (
    <div>
      <p>Parent count: {count}</p>
      <button onClick={() => setCount(c => c + 1)}>Increment Parent</button>
      <MyButton /> {/* æ¯æ¬¡éƒ½â€œå…¨æ–°â€çš„ç»„ä»¶ */}
    </div>
  );
}
```



* ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸ

  * mount/åˆæ¬¡æ¸²æŸ“
    * ç»„ä»¶å®ä¾‹ç¬¬ä¸€æ¬¡åˆ›å»º
    * æ–°çš„stateï¼Œpropåˆ›å»º

  * Re-render/å†æ¬¡æ¸²æŸ“
    * çŠ¶æ€å‘ç”Ÿæ”¹å˜
    * propsæ”¹å˜
    * çˆ¶ç»„ä»¶å†æ¬¡æ¸²æŸ“
    * å†…å®¹æ”¹å˜

  * Unmount
    * ç»„ä»¶å®ä¾‹é”€æ¯
    * stateå’Œpropsé”€æ¯

* æˆ‘ä»¬å¯ä»¥åœ¨è¿™äº›ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸ªé˜¶æ®µæ·»åŠ é’©å­å‡½æ•°ã€‚

![image-20251221094430154](1.assets/image-20251221094430154.png)



* äº§ç”Ÿå‰¯ä½œç”¨çš„æ–¹æ³•
  * äº‹ä»¶å¤„ç†å‡½æ•°ï¼šä¼˜å…ˆè€ƒè™‘ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œä¸è¦è¿‡åº¦ä½¿ç”¨useEffect
  * useEffectï¼šåœ¨ç»„ä»¶æ¸²æŸ“å®Œæ¯•æ—¶ï¼Œåœ¨ç»„ä»¶å¸è½½æ—¶ï¼Œéƒ½å¯ä»¥ä½¿ç”¨useEffectå®ç°å¯¹åº”æ—¶æœºçš„å‡½æ•°é’©å­ã€‚



* ç½‘ç»œæ¨¡å—å¯ä»¥ä½¿ç”¨èŠ‚æµæ¨¡å¼ï¼Œæ¥æµ‹è¯•ç½‘é€Ÿå·®æ—¶çš„é¡µé¢æ•ˆæœã€‚

![image-20251221104432620](1.assets/image-20251221104432620.png)



* Try-catchçš„ä½¿ç”¨ï¼Œthrow errorï¼Œå½“å‡ºç°ç½‘ç»œå¡é¡¿æ—¶ï¼Œæ˜¾ç¤ºé¢„åŠ è½½çš„å›¾ç¤ºï¼Œç½‘ç»œå‡ºé”™æ˜¾ç¤ºerrorã€‚

```jsx
export default function App() {
  const [movies, setMovies] = useState(tempMovieData);
  const [watched, setWatched] = useState(tempWatchedData);
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState("");
  const query = "interstellar";

  useEffect(function () {
    async function fetchMovies() {
      try {
        setIsLoading(true);
        const res = await fetch(
          `http://www.omdbapi.com/?i=tt3896198&apikey=${KEY}&s=${query}`
        );

        if (!res.ok)
          throw new Error("Something went wrong with feching movies");

        const data = await res.json();
        if (data.Response === "False") throw new Error("Movie not found");

        setMovies(data.Search);
        // console.log(data.Search);
        setIsLoading(false);
      } catch (err) {
        console.log(err.message);
        setError(err.message);
      } finally {
        setIsLoading(false);
      }
    }
    fetchMovies();
  }, []);

  return (
    <>
      <NavaBar>
        <Search />
        <NumResults movies={movies} />
      </NavaBar>

      <Main>
        {isLoading && <Loader />}
        {!isLoading && !error && <MovieList movies={movies} />}
        {error && <ErrorMessage message={error} />}
        <Box>
          <WatchedSummary watched={watched} />
          <WatchedMoviesList watched={watched} />
        </Box>
      </Main>
    </>
  );
}

function Loader() {
  return <p className="loader">Loading...</p>;
}
function ErrorMessage({ message }) {
  return (
    <p className="error">
      <span>â›”ï¸</span>
      {message}
    </p>
  );
}
```



* useEffectçš„æ•°ç»„çš„ä½œç”¨
  * æ²¡æœ‰æ•°ç»„æ—¶ï¼Œæ¯æ¬¡é‡æ–°æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œeffecté‡Œçš„å‡½æ•°
  * æœ‰æ•°ç»„æ—¶ï¼Œæ•°ç»„é‡Œçš„stateæˆ–è€…propsæ›´æ–°æ—¶ä»¥åŠåˆå§‹æ¸²æŸ“éƒ½ä¼šæ‰§è¡Œeffecté‡Œçš„å‡½æ•°
  * æ¯ä¸€ä¸ªeffecté‡Œä½¿ç”¨çš„stateå’Œpropséƒ½å¿…é¡»åŠ å…¥æ•°ç»„ã€‚

![image-20251221112903586](1.assets/image-20251221112903586.png)

* useEffectæ˜¯ä¸€ç§ä¸å¤–ç•ŒåŒæ­¥çš„æ‰‹æ®µï¼Œä»¥åŠç”Ÿå‘½å‘¨æœŸé’©å­



æ‰§è¡Œæ—¶æœºï¼š

* æœ‰æ•°ç»„+ä¾èµ–é¡¹ï¼šåœ¨ä¾èµ–é¡¹æ›´æ–°æ—¶ä»¥åŠmountåæ‰§è¡Œeffecté‡Œçš„å‡½æ•°ã€‚

* ç©ºæ•°ç»„ï¼šåªåœ¨mountåæ‰§è¡Œeffecté‡Œçš„å‡½æ•°ã€‚
* æ²¡æœ‰æ•°ç»„ï¼šæ¯æ¬¡æ¸²æŸ“åéƒ½æ‰§è¡Œeffecté‡Œçš„å‡½æ•°ã€‚

![image-20251221113203152](1.assets/image-20251221113203152.png)

* æ¯ä¸€æ¬¡åœ¨useEffectä¸­æ‰§è¡Œæ—¶ï¼Œæ·»åŠ setstateçš„å‡½æ•°éƒ½ä¼šå¼•å‘ä¸€æ¬¡é‡æ–°çš„ç»„ä»¶æ¸²æŸ“ï¼Œæ‰€æœ‰useEffectåº”è¯¥å°‘ç”¨ã€‚



* å¯ä»¥æ‹¥æœ‰å¤šå°‘effectï¼Œæ¯ä¸ªeffectåªåšä¸€ä»¶äº‹

```jsx
  useEffect(
    function () {
      async function getMovieDetails() {
        setIsLoading(true);
        const res = await fetch(
          `http://www.omdbapi.com/?apikey=${KEY}&i=${selectedId}`
        );
        const data = await res.json();
        // console.log(data);
        setMovie(data);
        setIsLoading(false);
      }

      getMovieDetails();
    },
    [selectedId]
  );

  useEffect(
    function () {
      if (!title) return;
      document.title = `Movie | ${title}`;
    },
    [title]
  );
```



* æ¸…ç†å‡½æ•°ï¼Œä¸¤ä¸ªæ¸…ç†æ—¶æœº

  * åœ¨effectå†æ¬¡æ‰§è¡Œå‰æ¸…ç†

  * åœ¨ç»„ä»¶unmountä¹‹åæ¸…ç†

    

* éœ€è¦æ¸…ç†çš„åŠŸèƒ½

  * HTTPè¯·æ±‚ï¼šå–æ¶ˆè¯·æ±‚
  * APIè®¢é˜…ï¼šå–æ¶ˆè®¢é˜…
  * æ‰§è¡Œå®šæ—¶å™¨ï¼šåœæ­¢å®šæ—¶å™¨
  * æ·»åŠ äº†äº‹ä»¶ç›‘å¬å™¨ï¼šç§»å‡ºäº‹ä»¶ç›‘å¬å™¨

![image-20251222114921164](1.assets/image-20251222114921164.png)



returnæ¸…ç†å‡½æ•°ï¼š

```jsx
useEffect(
    function () {
      if (!title) return;
      document.title = `Movie | ${title}`;
      return function () {
        document.title = "usePopcorn";
      };
    },
    [title]
);
```



* ä½¿ç”¨æµè§ˆå™¨apiï¼šabortcontrollerï¼Œåœ¨cleanupæ—¶å–æ¶ˆå½“å‰é“¾æ¥ã€‚

```jsx
  useEffect(
    function () {
      const controller = new AbortController();
      async function fetchMovies() {
        try {
          setIsLoading(true);
          setError("");
          const res = await fetch(
            `http://www.omdbapi.com/?i=tt3896198&apikey=${KEY}&s=${query}`,
            { signal: controller.signal }
          );

          if (!res.ok)
            throw new Error("Something went wrong with feching movies");

          const data = await res.json();
          if (data.Response === "False") throw new Error("Movie not found");

          setMovies(data.Search);
          // console.log(data.Search);
          setError("");
        } catch (err) {
          console.log(err.message);

          if (err.name !== "AbortEror") {
            setError(err.message);
          }
        } finally {
          setIsLoading(false);
        }
      }

      if (query.length < 3) {
        setMovies([]);
        setError("");
        return;
      }
      fetchMovies();
      return function () {
        controller.abort();
      };
    },
    [query]
  );
```



* cleanupæ¸…ç†addEventListener

```jsx
  useEffect(
    function () {
      function callback(e) {
        if (e.code === "Escape") {
          onCloseMovie();
          console.log("CLOSING");
        }
      }
      document.addEventListener("keydown", callback);

      return function () {
        document.removeEventListener("keydown", callback);
      };
    },
    [onCloseMovie]
  );
```



* æŒ‘æˆ˜1

```jsx
// `https://api.frankfurter.app/latest?amount=100&from=EUR&to=USD`

import { useState } from "react";
import { useEffect } from "react";

export default function App() {
  const [input, setInput] = useState("USD");
  const [output, setOutput] = useState("USD");
  const [money, setMoney] = useState("100");
  const [result, setResult] = useState("");
  const [error, setError] = useState("");
  const [isLoading, setIsLoading] = useState(false);
  useEffect(
    function () {
      const controller = new AbortController();
      async function fetchOut() {
        try {
          setIsLoading(true);
          setError("");
          const res = await fetch(
            `https://api.frankfurter.app/latest?amount=${money}&from=${input}&to=${output}`,
            { signal: controller.signal }
          );
          console.log(res);

          if (!res.ok && res.status !== 422)
            throw new Error("Something went wrong with feching movies");

          const data = await res.json();

          if (res.status !== 422) {
            setResult(data.rates[output]);
          } else if (data.message === "bad currency pair") {
            setResult(money);
          } else {
            throw new Error("Something went wrong with feching movies");
          }
        } catch (err) {
          if (err.name !== "AbortError") {
            console.log(err.message);
            setError(err.message);
          }
        } finally {
          setIsLoading(false);
        }
      }
      if (input !== output) {
        fetchOut();
      } else {
        setResult(money);
      }
      return function () {
        controller.abort();
      };
    },
    [input, output, money]
  );

  return (
    <div>
      <input
        type="text"
        value={money}
        onChange={(e) => setMoney(e.target.value)}
      />
      <select value={input} onChange={(e) => setInput(e.target.value)}>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="CAD">CAD</option>
        <option value="INR">INR</option>
      </select>
      <select value={output} onChange={(e) => setOutput(e.target.value)}>
        <option value="USD">USD</option>
        <option value="EUR">EUR</option>
        <option value="CAD">CAD</option>
        <option value="INR">INR</option>
      </select>
      <p>{isLoading ? "Loading" : error !== "" ? error : result}</p>
    </div>
  );
}

```





* å¸¸ç”¨hooks

![image-20251222153132599](1.assets/image-20251222153132599.png)

* hooksä½¿ç”¨è§„åˆ™
  * åªèƒ½åœ¨å‡½æ•°é¡¶å±‚è°ƒç”¨ï¼šä¸èƒ½åœ¨ifï¼Œå¾ªç¯ï¼Œå‡½æ•°ï¼Œè¿‡æ—©returnå¯¼è‡´åé¢çš„hooksæ²¡è°ƒç”¨
  * åªèƒ½åœ¨ç»„ä»¶ä¸­æˆ–è€…custom hookä¸­è°ƒç”¨ã€‚

![image-20251222153147861](1.assets/image-20251222153147861.png)



* hooksæ˜¯å­˜æ”¾åœ¨Fiberæ•°çš„çš„hooksé“¾è¡¨ä¸­ï¼Œå¦‚æœé“¾è¡¨ä¸­é—´çš„hookå› ä¸ºæ¡ä»¶æ¶ˆå¤±ï¼Œå›å¯¼è‡´é“¾è¡¨æ–­æ‰ï¼Œæ‰€ä»¥hookä¸èƒ½åœ¨ifä¸­ä½¿ç”¨ã€‚

![image-20251222153342074](1.assets/image-20251222153342074.png)



* è¿™å¥è¯imdbRating > 8ä¸ä¼šç”Ÿæ•ˆï¼ŒuseStateåªå–åˆå§‹çŠ¶æ€ä½œä¸ºè¾“å…¥ï¼Œå½“imdbRatingå˜åŒ–æ—¶ï¼Œä¸å½±å“useStateçš„åˆå§‹çŠ¶æ€ã€‚

```jsx
const [isTop,setIstop] = useState(imdbRating > 8);
```



* ä¸ºäº†å¾—åˆ°ä¸Šä¸€è¡Œçš„è®¾ç½®ç»“æœï¼Œä½¿ç”¨å‡½æ•°å½¢å¼è°ƒç”¨:

```jsx
setAvgRating(Number(imdbRating));
//ä¸ºäº†å¾—åˆ°ä¸Šä¸€è¡Œçš„è®¾ç½®ç»“æœï¼Œä½¿ç”¨å‡½æ•°å½¢å¼è°ƒç”¨
setAvgRating((x)=>(x+ userRating)/2);
```



* æ•°æ®å­˜å–çš„è§£å†³æ–¹æ¡ˆï¼š
* useStateå¸¦ä¸€ä¸ªçº¯å‡½æ•°<å¿…é¡»æ˜¯çº¯å‡½æ•°>è¿›è¡Œåˆå§‹åŒ–

```jsx
  const [watched, setWatched] = useState(function () {
    const storedValue = localStorage.getItem("watched");
    return JSON.parse(storedValue);
  });
  
  useEffect(
    function () {
      localStorage.setItem("watched", JSON.stringify(watched));
    },
    [watched]
  );
```



* useStateçš„ä½¿ç”¨æ€»ç»“

  * åˆ›å»ºæ—¶

    * å•å€¼
    * å›è°ƒå‡½æ•°ï¼Œå¿…é¡»æ˜¯çº¯å‡½æ•°

  * è®¾å®šæ—¶

    * å•å€¼
    * å›è°ƒå‡½æ•°ï¼Œå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼šï¼ˆéœ€è¦æ ¹æ®ä¹‹å‰çš„å€¼æ›´æ–°ç°åœ¨çš„å€¼æ—¶ä½¿ç”¨ï¼‰

    

![image-20251222165123368](1.assets/image-20251222165123368.png)



* useRef
  * åˆ›å»ºå˜é‡åœ¨é‡å¤æ¸²æŸ“ä¸­ç»´æŒä¸å˜ã€‚
  * ç”¨äºé€‰æ‹©å­˜å‚¨DOMå…ƒç´ 
  * userefæ˜¯ä¸ºäº†é‚£äº›ä¸ç”¨äºæ¸²æŸ“çš„dataå‡†å¤‡çš„åŠŸèƒ½ï¼Œåœ¨äº‹ä»¶å¤„ç†å‡½æ•°å’Œeffectä¸­ä½¿ç”¨ï¼Œä¸åœ¨jsxä¸­ä½¿ç”¨ã€‚

![image-20251222170453875](1.assets/image-20251222170453875.png)



* useRef
  * å¤šæ¬¡æ¸²æŸ“ç»´æŒä¸å˜
  * æ›´æ–°ä¸ä¼šå¯¼è‡´é‡æ–°æ¸²æŸ“
  * å¯ä»¥æ›´æ”¹ï¼Œé€šè¿‡.currentè®¿é—®
  * åŒæ­¥æ›´æ–°ï¼Œåœ¨æ›´æ”¹åå¯ä»¥ç«‹å³è¯»å–æ›´æ”¹åçš„å€¼ã€‚

![image-20251222170711968](1.assets/image-20251222170711968.png)



* refçš„ä½¿ç”¨,éœ€è¦åœ¨æ¸²æŸ“æ—¶ä¸ä¸¢å¤±æ•°æ®çš„æ•°æ®ï¼Œåˆä¸éœ€è¦åœ¨jsxä¸­æ˜¾ç¤ºæ—¶ä½¿ç”¨refï¼š

```jsx
const countRef = useRef(0);

useEffect(
  function () {
    if (userRating) countRef.current = countRef.current + 1;
  },
  [userRating]
);
```



* è‡ªå®šä¹‰hooks
  * å¯ä»¥é‡ç”¨çš„é€»è¾‘å‡½æ•°ï¼Œå¹¶ä¸”åŒ…å«å…¶ä»–hooksçš„ï¼Œåªèƒ½å®šä¹‰æˆè‡ªå®šä¹‰hooksã€‚
  * å®ƒåªåšä¸€ä»¶äº‹ã€‚
  * éµå¾ªhooksçš„è§„åˆ™
  * å‡½æ•°åéœ€è¦ä»¥useå¼€å¤´
  * ä¸åƒç»„ä»¶è¿”å›jsxï¼Œå®ƒè¿”å›ç›¸å…³çš„æ•°æ®ï¼Œä¸€èˆ¬æ˜¯[]å’Œ{}
  * å®ƒå°±æ˜¯ä¸€ä¸ªjså‡½æ•°ã€‚

![image-20251222191642783](1.assets/image-20251222191642783.png)



è‡ªå®šä¹‰hooksï¼š

```js
import { useState, useEffect } from "react";

const KEY = "8a0c11a1";

export function useMovies(query) {
  const [movies, setMovies] = useState();
  const [isLoading, setIsLoading] = useState(false);
  const [error, setError] = useState("");

  useEffect(
    function () {
      // callback?.();
      const controller = new AbortController();
      async function fetchMovies() {
        try {
          setIsLoading(true);
          setError("");
          const res = await fetch(
            `http://www.omdbapi.com/?i=tt3896198&apikey=${KEY}&s=${query}`,
            { signal: controller.signal }
          );

          if (!res.ok)
            throw new Error("Something went wrong with feching movies");

          const data = await res.json();
          if (data.Response === "False") throw new Error("Movie not found");

          setMovies(data.Search);
          // console.log(data.Search);
          setError("");
        } catch (err) {
          if (err.name !== "AbortError") {
            console.log(err.message);
            setError(err.message);
          }
        } finally {
          setIsLoading(false);
        }
      }

      if (query.length < 3) {
        setMovies([]);
        setError("");
        return;
      }
      // handleCloseMovie();
      fetchMovies();
      return function () {
        controller.abort();
      };
    },
    [query]
  );

  return { movies, setMovies, isLoading, setIsLoading, error, setError };
}
```

```jsx
const { movies, setMovies, isLoading, setIsLoading, error, setError } =
    useMovies(query);
```



* è‡ªå®šä¹‰hook

```jsx
import { useState, useEffect } from "react";
export function useLocalStorageState(initialState, key) {
  const [value, setValue] = useState(function () {
    const storedValue = localStorage.getItem(key);
    return storedValue ? JSON.parse(storedValue) : initialState;
  });

  useEffect(
    function () {
      localStorage.setItem(key, JSON.stringify(value));
    },
    [value, key]
  );

  return [value, setValue];
}
```



* æŒ‘æˆ˜1ï¼šåˆ¶ä½œè‡ªå·±çš„hooks

```jsx
import { useState } from "react";

function useGeolocation() {
  const [position, setPosition] = useState({});
  const [error, setError] = useState(null);
  const [isLoading, setIsLoading] = useState(false);
  const { lat, lng } = position;

  function getPositions(params) {
    if (!navigator.geolocation)
      return setError("Your browser does not support geolocation");

    setIsLoading(true);
    navigator.geolocation.getCurrentPosition(
      (pos) => {
        setPosition({
          lat: pos.coords.latitude,
          lng: pos.coords.longitude,
        });
        setIsLoading(false);
      },
      (error) => {
        setError(error.message);
        setIsLoading(false);
      }
    );
  }

  return [lat, lng, isLoading, error, getPositions];
}

export default function App() {
  const [countClicks, setCountClicks] = useState(0);
  [lat, lng, isLoading, error, getPositions] = useGeolocation();

  function getPosition() {
    setCountClicks((count) => count + 1);
    getPositions();
  }

  return (
    <div>
      <button onClick={getPosition} disabled={isLoading}>
        Get my position
      </button>

      {isLoading && <p>Loading position...</p>}
      {error && <p>{error}</p>}
      {!isLoading && !error && lat && lng && (
        <p>
          Your GPS position:{" "}
          <a
            target="_blank"
            rel="noreferrer"
            href={`https://www.openstreetmap.org/#map=16/${lat}/${lng}`}
          >
            {lat}, {lng}
          </a>
        </p>
      )}

      <p>You requested position {countClicks} times</p>
    </div>
  );
}
```





Useful Resources for Part 3

Here are some **high-quality resources** that you might find helpful while studying this Part 3. (The list follows the order of sections in this part)

***These resources are 100% optional, but might give you additional insights or provide ever deeper dives into some topics.\***

ğŸ‘‰ [Tao of React - Software Design, Architecture & Best Practices](https://alexkondov.com/tao-of-react/?ref=jonas.io)

ğŸ‘‰ [The new wave of React state management](https://frontendmastery.com/posts/the-new-wave-of-react-state-management/?ref=jonas.io) (Excellent read!)

ğŸ‘‰ [A Visual Guide to React Rendering - useMemo](https://alexsidorenko.com/blog/react-render-usememo?ref=jonas.io)

ğŸ‘‰ [React as a UI Runtime](https://overreacted.io/react-as-a-ui-runtime/?ref=jonas.io) (By Dan Abramov from the React team)

ğŸ‘‰ [You Might Not Need an Effect](https://react.dev/learn/you-might-not-need-an-effect?ref=jonas.io) (Official React docs)

ğŸ‘‰ [A Complete Guide to useEffect](https://overreacted.io/a-complete-guide-to-useeffect/?ref=jonas.io) (By Dan Abramov)

ğŸ‘‰ [useEffect sometimes fires before paint](https://blog.thoughtspile.tech/2021/11/15/unintentional-layout-effect/?ref=jonas.io)

ğŸ‘‰ [Making setInterval Declarative with React Hooks](https://overreacted.io/making-setinterval-declarative-with-react-hooks/?ref=jonas.io) (By Dan Abramov)

ğŸ‘‰ [Redux - Not Dead Yet!](https://blog.isquaredsoftware.com/2018/03/redux-not-dead-yet/?ref=jonas.io) (By Mark Erikson from the Redux team)

ğŸ‘‰ [Why React Context is Not a "State Management" Tool](https://blog.isquaredsoftware.com/2021/01/context-redux-differences/) (By Mark Erikson)



**Library documentation:**

ğŸ‘‰ [Vite](https://vitejs.dev/guide/why.html) (Why Vite is so fast)

ğŸ‘‰ [CSS Modules](https://github.com/css-modules/css-modules)

ğŸ‘‰ [React Router](https://reactrouter.com/en/main?ref=jonas.io)

ğŸ‘‰ [React Leaflet: Installation](https://react-leaflet.js.org/docs/start-installation/?ref=jonas.io)

ğŸ‘‰ [Redux: Style Guide](https://redux.js.org/style-guide/?ref=jonas.io) (A must-read for Redux users!)

ğŸ‘‰ [Redux Toolkit](https://redux-toolkit.js.org/tutorials/overview?ref=jonas.io)

ğŸ‘‰ [React Redux](https://react-redux.js.org/api/hooks?ref=jonas.io)





* reducer hooksçš„ä½¿ç”¨

```jsx
import { act, useReducer, useState } from "react";

const initialState = { count: 0, step: 1 };
function reducer(state, action) {
  console.log(state, action);
  //return { count: 0, step: 1 };
  // if (action.type === "inc") return state + 1;
  // if (action.type === "dec") return state - 1;
  // if (action.type === "setCount") return action.payload;
  switch (action.type) {
    case "dec":
      return { ...state, count: state.count - state.step };
    case "inc":
      return { ...state, count: state.count + state.step };

    case "setCount":
      return { ...state, count: action.payload };

    case "setStep":
      return { ...state, step: action.payload };
    case "reset":
      return initialState;
    default:
      throw new Error("Unkown action");
  }
}
function DateCounter() {
  //const [count, setCount] = useState(0);
  // const [step, setStep] = useState(1);

  const [state, dispatch] = useReducer(reducer, initialState);
  const { count, step } = state;
  // This mutates the date object.
  const date = new Date("june 21 2027");
  date.setDate(date.getDate() + count);

  const dec = function () {
    // setCount((count) => count - 1);
    //setCount((count) => count - step);
    dispatch({ type: "dec" });
  };

  const inc = function () {
    dispatch({ type: "inc" });
    // setCount((count) => count + 1);
    //setCount((count) => count + step);
  };

  const defineCount = function (e) {
    //setCount(Number(e.target.value));
    dispatch({ type: "setCount", payload: e.target.value });
  };

  const defineStep = function (e) {
    dispatch({ type: "setStep", payload: Number(e.target.value) });
    // setStep(Number(e.target.value));
  };

  const reset = function () {
    //setCount(0);
    // setStep(1);
    dispatch({ type: "reset" });
  };

  return (
    <div className="counter">
      <div>
        <input
          type="range"
          min="0"
          max="10"
          value={step}
          onChange={defineStep}
        />
        <span>{step}</span>
      </div>

      <div>
        <button onClick={dec}>-</button>
        <input value={count} onChange={defineCount} />
        <button onClick={inc}>+</button>
      </div>

      <p>{date.toDateString()}</p>

      <div>
        <button onClick={reset}>Reset</button>
      </div>
    </div>
  );
}
export default DateCounter;
```



* ä»€ä¹ˆæ—¶å€™ä½¿ç”¨userReducer

  * å½“ç»„ä»¶æœ‰å¾ˆå¤šçš„çŠ¶æ€å’Œsetteråˆ†æ•£åœ¨ç»„ä»¶ä¸­
  * å½“è®¸å¤šçŠ¶æ€éœ€è¦åœ¨åŒä¸€ä¸ªæ—¶åˆ»æ›´æ–°ï¼Œåƒæ˜¯å¼€å§‹æ¸¸æˆ
  * å½“ä¸€ä¸ªçŠ¶æ€çš„æ›´æ–°ä¾èµ–äºå…¶ä»–çš„å¾ˆå¤šçŠ¶æ€

  

* useReducer
  * ç®¡ç†å¤æ‚çš„çŠ¶æ€
  * çŠ¶æ€å­˜åœ¨stateä¸­
  * reducerå‡½æ•°åŒ…å«æ‰€æœ‰å¤„ç†çŠ¶æ€çš„é€»è¾‘ã€‚å°†é€»è¾‘ä»ç»„ä»¶ä¸­è§£è€¦å‡ºæ¥ã€‚
  * actionä»£è¡¨å¦‚ä½•æ›´æ–°çŠ¶æ€
  * dispatchå‡½æ•°å‘é€actionç»™reducer
  * reducerå¿…é¡»æ˜¯çº¯å‡½æ•°ï¼Œæ›´æ–°åï¼Œé¡µé¢ä¼šé‡æ–°æ¸²æŸ“ã€‚

![image-20251223112802960](1.assets/image-20251223112802960.png)



![image-20251223113337421](1.assets/image-20251223113337421.png)





* ä½¿ç”¨json-serveræ¨¡æ‹Ÿæœ¬åœ°æ•°æ®åˆ°å‡æœåŠ¡å™¨

```
npm i json-server
```

åœ¨package.jsonä¸­æ·»åŠ å‘½ä»¤

```js
  "scripts": {
    "start": "react-scripts start",
    "build": "react-scripts build",
    "test": "react-scripts test",
    "eject": "react-scripts eject",
    "server": "json-server --watch data/questions.json --port 8000"
  },
```

æ‰§è¡Œ

```
npm run server
```



* useReducerå®ç°çš„çŠ¶æ€æœº

```jsx
const initialState = {
  questions: [],
  //'loading' 'error' 'ready' 'active' 'finished'
  status: "loading",
  index: 0,
  answer: null,
  points: 0,
  highscore: 0,
  secondsRemaining: null,
};
const SECS_PER_QUESTION = 30;
function reducer(state, action) {
  switch (action.type) {
    case "dataReceived":
      return { ...state, questions: action.payload, status: "ready" };
    case "dataFailed":
      return { ...state, status: "error" };

    case "start":
      return {
        ...state,
        status: "active",
        secondsRemaining: state.questions.length * SECS_PER_QUESTION,
      };
    case "newAnswer":
      const question = state.questions[state.index];

      return {
        ...state,
        answer: action.payload,
        points:
          action.payload === question.correctOption
            ? state.points + question.points
            : state.points,
      };
    case "nextQuestion":
      return { ...state, index: state.index + 1, answer: null };

    case "finish":
      return {
        ...state,
        status: "finished",
        highscore:
          state.points > state.highscore ? state.points : state.highscore,
      };

    case "restart":
      return { ...initialState, questions: state.questions, status: "ready" };

    case "tick":
      return {
        ...state,
        secondsRemaining: state.secondsRemaining - 1,
        status: state.secondsRemaining === 0 ? "finished" : state.status,
      };
    default:
      throw new Error("Action unkonwn");
  }
}
```



* Timerçš„å¯åœï¼š

```jsx
  useEffect(
    function () {
      const id = setInterval(function () {
        // console.log("tick");
        dispatch({ type: "tick" });
      }, 1000);
      return () => clearInterval(id);
    },
    [dispatch]
  );
```



* useState
  * ç‹¬ç«‹çŠ¶æ€
  * æ›´æ–°åˆ†å¸ƒåœ¨äº‹ä»¶å¤„ç†å‡½æ•°å’Œeffectä¸­
  * ä½¿ç”¨setteræ›´æ–°
  * å‘½ä»¤å¼æ›´æ–°
  * æ˜“äºä½¿ç”¨å’Œç†è§£

* useReducer
  * å¤šä¸ªçŠ¶æ€æ†ç»‘åœ¨ä¸€èµ·
  * æ›´æ–°é€»è¾‘é›†ä¸­åœ¨reducerå‡½æ•°ä¸­å¤„ç†
  * é€šè¿‡dispatchå‘½ä»¤æ›´æ–°çŠ¶æ€
  * å£°æ˜å¼æ›´æ–°
  * è¾ƒéš¾ç†è§£å’Œä½¿ç”¨

![image-20251223163659596](1.assets/image-20251223163659596.png)



* åªæœ‰ä¸€ä¸ªçŠ¶æ€ï¼Ÿ
* å‡ ä¸ªçŠ¶æ€ç»å¸¸ä¸€èµ·æ›´æ–°ï¼Ÿ
* 3åˆ°4ä¸ªç›¸å…³çš„çŠ¶æ€ï¼ŒåŒ…å«å¯¹è±¡ï¼Ÿ
* å¤ªå¤šçš„eventå¤„ç†å‡½æ•°è®©ç»„ä»¶å˜å¤§å’Œéš¾ä»¥ç†è§£ï¼Ÿ

![image-20251223164054649](1.assets/image-20251223164054649.png)



* æŒ‘æˆ˜ï¼šä½¿ç”¨useReducerå®ç°ä¸€ä¸ªé“¶è¡Œ

```jsx
import "./styles.css";
import { useReducer } from "react";
/*
INSTRUCTIONS / CONSIDERATIONS:

1. Let's implement a simple bank account! It's similar to the example that I used as an analogy to explain how useReducer works, but it's simplified (we're not using account numbers here)

2. Use a reducer to model the following state transitions: openAccount, deposit, withdraw, requestLoan, payLoan, closeAccount. Use the `initialState` below to get started.

3. All operations (expect for opening account) can only be performed if isActive is true. If it's not, just return the original state object. You can check this right at the beginning of the reducer

4. When the account is opened, isActive is set to true. There is also a minimum deposit amount of 500 to open an account (which means that the balance will start at 500)

5. Customer can only request a loan if there is no loan yet. If that condition is met, the requested amount will be registered in the 'loan' state, and it will be added to the balance. If the condition is not met, just return the current state

6. When the customer pays the loan, the opposite happens: the money is taken from the balance, and the 'loan' will get back to 0. This can lead to negative balances, but that's no problem, because the customer can't close their account now (see next point)

7. Customer can only close an account if there is no loan, AND if the balance is zero. If this condition is not met, just return the state. If the condition is met, the account is deactivated and all money is withdrawn. The account basically gets back to the initial state
*/

const initialState = {
  balance: 0,
  loan: 0,
  isActive: false,
};

function reducer(state, action) {
  switch (action.type) {
    case "openAccount":
      return { ...state, isActive: true, balance: state.balance + 500 };

    case "Deposit":
      return { ...state, balance: state.balance + 150 };

    case "Withdraw":
      return { ...state, balance: state.balance - 50 };
    case "RequestLoan":
      return {
        ...state,
        balance: state.loan === 0 ? state.balance + 5000 : state.balance,
        loan: state.loan === 0 ? state.loan + 5000 : state.loan,
      };
    case "PayLoan":
      return {
        ...state,
        balance: state.loan > 0 ? state.balance - 5000 : state.balance,
        loan: state.loan > 0 ? state.loan - 5000 : state.loan,
      };

    case "closeAccount":
      return {
        ...state,
        isActive:
          state.balance > 0 && state.loan === 0 ? false : state.isActive,
      };
    default:
      throw new Error("Action unknown");
  }
}

export default function App() {
  const [{ balance, loan, isActive }, dispatch] = useReducer(
    reducer,
    initialState
  );
  return (
    <div className="App">
      <h1>useReducer Bank Account</h1>
      <p>Balance: {balance}</p>
      {loan > 0 && <p>Loan: {loan}</p>}

      <p>
        <button
          onClick={() => {
            dispatch({ type: "openAccount" });
          }}
          disabled={isActive}
        >
          Open account
        </button>
      </p>
      <p>
        <button
          onClick={() => {
            dispatch({ type: "Deposit" });
          }}
          disabled={!isActive}
        >
          Deposit 150
        </button>
      </p>
      <p>
        <button
          onClick={() => {
            dispatch({ type: "Withdraw" });
          }}
          disabled={!isActive}
        >
          Withdraw 50
        </button>
      </p>
      <p>
        <button
          onClick={() => {
            dispatch({ type: "RequestLoan" });
          }}
          disabled={!isActive}
        >
          Request a loan of 5000
        </button>
      </p>
      {loan > 0 && (
        <p>
          <button
            onClick={() => {
              dispatch({ type: "PayLoan" });
            }}
            disabled={!isActive}
          >
            Pay loan
          </button>
        </p>
      )}
      <p>
        <button
          onClick={() => {
            dispatch({ type: "closeAccount" });
          }}
          disabled={!isActive}
        >
          Close account
        </button>
      </p>
    </div>
  );
}
```



* viteå®‰è£…ä»¥åŠé…ç½®eslint

```
npm i eslint vite-plugin-eslint eslint-config-react-app --save-dev 
```

åˆ›å»º.eslintrc.jsonæ–‡ä»¶

````
{
  "extends": "react-app"
}
````

åœ¨vite.config.jsä¸­æ·»åŠ eslint

```js
import { defineConfig } from "vite";
import react from "@vitejs/plugin-react";
import eslint from "vite-plugin-eslint";

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [react(), eslint()],
});
```



* è·¯ç”±
  * æ˜ å°„ä¸åŒURLåˆ°ä¸åŒçš„UIé¡µé¢çš„åŠŸèƒ½å«åšè·¯ç”±
  * è®©ç”¨æˆ·æ›´åŠ ä¸åŒçš„URLå¯¼èˆªåˆ°ä¸åŒçš„é¡µé¢
  * å…è®¸æˆ‘ä»¬æ„å»ºå•é¡µåº”ç”¨

![image-20251223191558809](1.assets/image-20251223191558809.png)



* å•é¡µåº”ç”¨
  * åº”ç”¨å®Œæ•´è¿è¡Œåœ¨å®¢æˆ·ç«¯
  * ä½¿ç”¨è·¯ç”±æ˜ å°„é¡µé¢
  * ä½¿ç”¨jsæ›´æ–°dom
  * é¡µé¢æ°¸è¿œä¸ä¼šé‡æ–°åŠ è½½
  * åƒæ˜¯æ‰‹æœºapp
  * ä½¿ç”¨apiè·å–é¢å¤–çš„æ•°æ®

![image-20251223191742698](1.assets/image-20251223191742698.png)



* å®‰è£…react-router

```
npm i react-router-dom@6
```



* ä½¿ç”¨navlinkä»£æ›¿linkï¼Œå½“å‰æ¿€æ´»çš„linkä¼šæœ‰ä¸€ä¸ªclass=activeçš„ç±»

```jsx
import { Link, NavLink } from "react-router-dom";

function PageNav() {
  return (
    <nav>
      <ul>
        <li>
          <NavLink to="/">Homepage</NavLink>
        </li>
        <li>
          <NavLink to="/pricing">pricing</NavLink>
        </li>
        <li>
          <NavLink to="/product">product</NavLink>
        </li>
      </ul>
    </nav>
  );
}
```



* react routerçš„é…ç½®ï¼š

```jsx
import { BrowserRouter, Routes, Route } from "react-router-dom";
import Product from "./pages/Product";
import Pricing from "./pages/Pricing";
import Homepage from "./pages/Homepage";
import PageNotFound from "./pages/PageNotFound";

function App() {
  return (
    <BrowserRouter>
      <Routes>
        <Route path="/" element={<Homepage />} />
        <Route path="product" element={<Product />} />
        <Route path="pricing" element={<Pricing />} />
        <Route path="*" element={<PageNotFound />} />
      </Routes>
    </BrowserRouter>
  );
}
```



* åœ¨Reactä¸­cssçš„ä½¿ç”¨ç§ç±»ï¼š

![image-20251224090433932](1.assets/image-20251224090433932.png)



css moduleä¸­å£°æ˜å…¨å±€å˜é‡ï¼š

```css
:global(.test) {
  background-color: red;
}

//é€‰æ‹©class=activeçš„navï¼Œæ”¾åœ¨æ·»åŠ éšæœºå­—ç¬¦ï¼Œä½¿ç”¨globalå˜é‡
.nav :global(.active) {
  background-color: green;
}
```



* è‡ªåŠ¨ç”Ÿæˆcss includeï¼šæ·»åŠ è¿›snippeté‡Œ

```js
  "importCSSModule": {
    "prefix": "csm",
    "scope": "javascript,typescript,javascriptreact",
    "body": ["import styles from './${TM_FILENAME_BASE}.module.css'"],
    "description": "Import CSS Module as `styles`"
  },
```

